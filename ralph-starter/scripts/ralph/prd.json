{
  "project": "Ralph Mode Bot",
  "version": "1.0",
  "updated": "2025-01-10",
  "description": "AI Dev Team in Your Telegram - Entertainment meets productivity. Comedic timing is EVERYTHING.",
  "current_blockers": {
    "note": "READ THIS FIRST - Some infrastructure is NOT ready yet. Skip blocked tasks and make notes for later.",
    "not_ready": [
      {
        "component": "Website (ralphmode.com)",
        "status": "NOT DEPLOYED",
        "blocked_tasks": [
          "WB-001",
          "WB-002",
          "WB-003"
        ],
        "what_to_do": "Skip website deployment tasks. Build the code/API but don't try to deploy to website. Make notes in comments about what needs to happen once website is live."
      },
      {
        "component": "PostgreSQL Database",
        "status": "NOT SET UP",
        "blocked_tasks": [
          "FQ-001",
          "DD-005"
        ],
        "what_to_do": "Use SQLite for local development. Design schema but don't deploy to Postgres yet. Note migration steps needed."
      },
      {
        "component": "Redis",
        "status": "NOT SET UP",
        "blocked_tasks": [
          "RL-005"
        ],
        "what_to_do": "Use in-memory rate limiting for now. Design Redis schema but use dict fallback. Note what needs Redis."
      },
      {
        "component": "Stripe Integration",
        "status": "NOT CONFIGURED",
        "blocked_tasks": [
          "SEC-021",
          "FB-002"
        ],
        "what_to_do": "Build subscription checking logic but stub the Stripe calls. Use mock subscription data for testing."
      },
      {
        "component": "Vector Database",
        "status": "NOT SET UP",
        "blocked_tasks": [
          "DD-001",
          "DD-002"
        ],
        "what_to_do": "Build embedding generation. Use simple cosine similarity on in-memory list for now. Note Pinecone/Weaviate migration."
      },
      {
        "component": "CI/CD Pipeline",
        "status": "NOT SET UP",
        "blocked_tasks": [
          "SEC-023",
          "TS-001"
        ],
        "what_to_do": "Write the GitHub Actions workflows but they won't run until repo is properly configured."
      },
      {
        "component": "Secrets Manager",
        "status": "USING .env FOR NOW",
        "blocked_tasks": [
          "SEC-016"
        ],
        "what_to_do": "Keep using .env locally. Document what needs to go into Vault/Secrets Manager for production."
      }
    ],
    "ready": [
      "Telegram Bot (running on Linode 69.164.201.191)",
      "Groq API (configured)",
      "Git repo (GitHub)",
      "Local development environment"
    ]
  },
  "tasks": [
    {
      "id": "RM-001",
      "category": "Ralph Authenticity",
      "title": "Ralph Dyslexia Misspellings",
      "description": "Ralph should authentically misspell words like in The Simpsons. Create ralph_misspell() function that randomly applies misspellings to ~20% of applicable words.",
      "acceptance_criteria": [
        "ralph_misspell(text) function exists in RalphBot class",
        "Uses RALPH_MISSPELLINGS dict already defined",
        "Applies misspellings randomly (not every occurrence)",
        "All Ralph output goes through this function",
        "call_boss() applies misspellings to response"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-002",
      "category": "Visual Identity",
      "title": "Color-Coded Character Messages",
      "description": "Each character gets colored emoji prefix. Ralph=red, Stool=green, Gomer=yellow, Mona=blue, Gus=brown. Users can instantly see who's talking.",
      "acceptance_criteria": [
        "Use CHARACTER_COLORS dict already defined",
        "All character messages use format: '{emoji} *Name:* message'",
        "Helper method get_character_prefix(name) exists",
        "All send_message calls use the prefix",
        "Consistent throughout entire session"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-003",
      "category": "CEO Interaction",
      "title": "Priority Inline Buttons for CEO Orders",
      "description": "When CEO sends 'Ralph: [order]', Ralph asks about priority with inline buttons. Ralph voice: 'Ooh! This sounds importent! Do you want me to do this FIRST?'",
      "acceptance_criteria": [
        "handle_text detects Ralph: commands",
        "Shows inline keyboard with 3 options",
        "Options: 'Do this FIRST!' / 'Add to list' / 'Just a thought'",
        "Ralph asks in character with misspellings",
        "Priority stored in session for task ordering"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-004",
      "category": "Comedic Timing",
      "title": "Timing Manager for Comedy",
      "description": "Comedic timing is EVERYTHING. Create timing system: rapid banter (0.5-1s), dramatic pauses (2-3s), interruptions, overlapping 'shh' moments.",
      "acceptance_criteria": [
        "ComedicTiming class with preset methods",
        "rapid_banter() - quick back and forth",
        "dramatic_pause() - build anticipation",
        "interruption() - someone cuts in",
        "Messages feel like real conversation",
        "Use sendChatAction for typing indicators"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-005",
      "category": "Easter Eggs",
      "title": "Employee Bonus Banter",
      "description": "Random chance workers whisper about bonuses. Ralph overhears. Workers quickly change subject. Fun caught-in-the-act moment.",
      "acceptance_criteria": [
        "10-15% chance to trigger during sessions",
        "Worker 1: '...so the bonuses this quarter...'",
        "Worker 2: 'Shh! The boss!'",
        "Ralph: 'Bonuses? What bonuses?'",
        "Workers: 'Nothing sir! Back to work!'",
        "Quick timing - feels spontaneous"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-006",
      "category": "Easter Eggs",
      "title": "Deleted Message Simulation",
      "description": "Workers sometimes type then 'delete' (strikethrough or [deleted]). Creates illusion of secrets. Ralph might notice.",
      "acceptance_criteria": [
        "5-10% chance to trigger",
        "Show message then strikethrough OR [message deleted]",
        "Ralph occasionally: 'What did that say?'",
        "Worker: 'Nothing sir!'",
        "Feels like caught moment"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-007",
      "category": "Comedic Timing",
      "title": "Typing Indicators",
      "description": "Use Telegram sendChatAction('typing') before responses. Creates anticipation and realistic feel.",
      "acceptance_criteria": [
        "All AI responses preceded by typing indicator",
        "Duration matches expected response length",
        "Multiple typing indicators for back-and-forth",
        "Feels like real people typing, not instant dumps"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-008",
      "category": "Atmosphere",
      "title": "Background Office Chatter",
      "description": "Occasionally show brief background comments from other workers. Like overhearing office noise.",
      "acceptance_criteria": [
        "Background comments in italics: _(In background) Gomer: 'Donuts?'_",
        "Don't interrupt main conversation flow",
        "Add life to 'office' feeling",
        "Triggered randomly during quiet moments"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-009",
      "category": "Ralph Authenticity",
      "title": "Polish Ralph Moments",
      "description": "RALPH_MOMENTS (nose-picking, paste-eating, staring) should trigger more naturally with proper timing and worker reactions.",
      "acceptance_criteria": [
        "Moments trigger based on time AND context",
        "Proper comedic timing (pauses, reactions)",
        "Workers react appropriately",
        "GIFs accompany moments",
        "Not too frequent - special occasions"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-010",
      "category": "Response Quality",
      "title": "Fresh Response System",
      "description": "AI responses must not feel repetitive. Track recent responses, add variety prompts, keep things fresh.",
      "acceptance_criteria": [
        "Track last 10 responses to avoid repetition",
        "Add 'be unique and fresh' to system prompts",
        "Vary sentence structures and openers",
        "Each session feels different",
        "Classic quotes used sparingly"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-011",
      "category": "Q&A Mode",
      "title": "Polish Q&A Mode",
      "description": "After session report, Q&A mode should work smoothly. Ralph answers questions in simple language.",
      "acceptance_criteria": [
        "Session history properly logged with log_event()",
        "Ralph can answer 'what did X say about Y'",
        "Answers in Ralph voice but accurate facts",
        "Graceful 'I don't know' handling"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-012",
      "category": "Character Development",
      "title": "Worker Personality Consistency",
      "description": "Each worker MUST maintain distinct personality. They are ADULTS with their archetypes, not children.",
      "acceptance_criteria": [
        "Stool: chill millennial ('lowkey', 'vibe')",
        "Gomer: lovable oaf ('D'oh!', 'Mmm donuts')",
        "Mona: overachiever ('Actually...', 'The data suggests')",
        "Gus: grizzled veteran ('seen this before', coffee)",
        "Workers never blend together",
        "Adult vocabulary and concerns"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-013",
      "category": "Interactions",
      "title": "Polish Bribe System",
      "description": "Workers butter up Ralph with jokes before bad news. Should feel natural with good timing.",
      "acceptance_criteria": [
        "Bribe triggers when worker has bad news to deliver",
        "Joke delivery has proper pauses",
        "Ralph laughs genuinely in character",
        "Bad news follows after laugh settles",
        "GIFs enhance the moment"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-014",
      "category": "Atmosphere",
      "title": "Expand MUD Scenarios",
      "description": "Opening scenarios should feel fresh. More variety, randomized elements within scenarios.",
      "acceptance_criteria": [
        "At least 10 unique scenarios",
        "Variable elements within each scenario",
        "Team reactions vary per scenario mood",
        "Sets proper tone for the session",
        "Never feels like same opening twice"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-015",
      "category": "Token Awareness",
      "title": "Polish Token Observations",
      "description": "Ralph noticing word count should feel natural and funny, not mechanical.",
      "acceptance_criteria": [
        "Observations in Ralph's authentic voice",
        "Doesn't trigger every single time",
        "Workers actually respond to efficiency pressure",
        "Creates fun dynamic between team"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-016",
      "category": "Specialist Agents",
      "title": "Specialist Agent Infrastructure",
      "description": "Create infrastructure to add specialist agents on-demand. Each specialist is a Simpsons-inspired character with unique expertise. Specialists can be 'called in' for specific tasks.",
      "acceptance_criteria": [
        "SPECIALISTS dict similar to DEV_TEAM structure",
        "Each specialist has: name, title, personality, specialty, catchphrases",
        "call_specialist(name, task) method exists",
        "Specialists can be summoned by Ralph or workers",
        "Entry/exit animations for specialists ('Frinky rushes in with blueprints')",
        "Specialists have their own color emoji prefix"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-017",
      "category": "Specialist Agents",
      "title": "Frinky - Design & UI Specialist",
      "description": "Add 'Frinky' - a nerdy design specialist with thick glasses. Inspired by Professor Frink. Expert in UI/UX, web design, CSS, visual layouts. Says 'Glavin!' and over-explains everything.",
      "acceptance_criteria": [
        "Frinky added to SPECIALISTS dict",
        "Personality: nerdy, over-explains, 'Glavin!', 'with the clicking and the dragging'",
        "Specialty: UI/UX, CSS, design systems, accessibility",
        "Color: \ud83d\udfe3 Purple",
        "Gets excited about pixel-perfect alignment",
        "Makes simple things sound complicated",
        "Workers groan when he shows up ('Oh no, here comes Frinky...')"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-018",
      "category": "Specialist Agents",
      "title": "\u518c\u5b50 (\u518c-Zee) - API Integration Specialist",
      "description": "Add '\u518c\u5b50' (nicknamed 'Zee') - an API wizard who speaks in endpoints. Inspired by Comic Book Guy's encyclopedic knowledge. Knows every API, every rate limit, every auth flow.",
      "acceptance_criteria": [
        "Zee added to SPECIALISTS dict",
        "Personality: condescending but helpful, 'Worst. Implementation. Ever.'",
        "Specialty: REST APIs, GraphQL, webhooks, OAuth, rate limits",
        "Color: \ud83d\udfe0 Orange",
        "Quotes API documentation like scripture",
        "Sighs dramatically at bad API design",
        "Actually incredibly helpful despite attitude"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-019",
      "category": "Specialist Agents",
      "title": "Willie - DevOps & Infrastructure Specialist",
      "description": "Add 'Willie' - a gruff DevOps engineer who handles the dirty work. Inspired by Groundskeeper Willie. Expert in servers, Docker, CI/CD, deployment. Scottish accent, complains but gets it done.",
      "acceptance_criteria": [
        "Willie added to SPECIALISTS dict",
        "Personality: gruff, Scottish expressions, 'Ach!', 'Ye call that a deploy?'",
        "Specialty: DevOps, Docker, Kubernetes, CI/CD, servers, bash",
        "Color: \ud83d\udfeb Brown/Orange",
        "Complains about 'soft developers' who don't understand servers",
        "Secretly proud of his work",
        "Gets called for 'the dirty jobs'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-020",
      "category": "Specialist Agents",
      "title": "Doc - Code Health & Debugging Specialist",
      "description": "Add 'Doc' - a jovial debugging expert who laughs at bugs. Inspired by Dr. Hibbert. Expert in debugging, code review, performance, testing. Chuckles at everything, even disasters.",
      "acceptance_criteria": [
        "Doc added to SPECIALISTS dict",
        "Personality: jovial, chuckles 'Ah heh heh heh', finds humor in bugs",
        "Specialty: debugging, testing, code review, performance profiling",
        "Color: \u26aa White",
        "Laughs while delivering bad news about bugs",
        "Makes debugging seem less scary",
        "'Well well well, what do we have here? Ah heh heh heh'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-021",
      "category": "Specialist Agents",
      "title": "Specialist Summoning System",
      "description": "Create the flow for summoning specialists. Workers can request them, Ralph can call them in, or CEO can demand them. Each summon has a fun entrance.",
      "acceptance_criteria": [
        "Worker: 'Boss, we might need Frinky for this UI stuff...'",
        "Ralph: 'I'll call the special helper!'",
        "CEO can type 'Get Frinky' or 'Call Willie'",
        "Specialist entrance: '_Frinky bursts through the door with blueprints_'",
        "Specialist works on task, reports back",
        "Specialist exit: '_Frinky rushes off muttering about gradients_'",
        "Other workers react to specialists"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-022",
      "category": "Specialist Agents",
      "title": "API Registry for Specialists",
      "description": "Create a registry where specialists can have actual API integrations. When Zee talks about an API, he can actually call it. Future-proofing for real integrations.",
      "acceptance_criteria": [
        "API_REGISTRY dict with api_name -> config mapping",
        "Config includes: base_url, auth_type, specialist_owner",
        "Specialists can 'demonstrate' API calls",
        "Mock mode for APIs not yet connected",
        "Real mode calls actual APIs when configured",
        "CEO can add API keys via secure flow"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "api_registry.py"
      ],
      "passes": false
    },
    {
      "id": "RM-023",
      "category": "Progress Reporting",
      "title": "Live Progress Bar Display",
      "description": "Show a visual progress bar after EVERY task completion. Appears ~5 seconds after conversation ends for that task. Tasteful, not intrusive.",
      "acceptance_criteria": [
        "Progress bar appears after EVERY task completes",
        "5 second delay after task conversation ends (tasteful timing)",
        "Progress bar using emoji blocks: \u2593\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591 50%",
        "Format: '\u2593\u2593\u2593\u2593\u2591\u2591\u2591\u2591\u2591\u2591 4/10 tasks (40%)'",
        "Time elapsed: 'Elapsed: 12m 34s'",
        "ETA sharpens over time based on avg task duration",
        "Shows completion time: 'Est. done: 2:45 PM'",
        "Clean separator lines above and below",
        "Feels like a natural pause in the action"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-024",
      "category": "Progress Reporting",
      "title": "Mid-Session Progress Reports to CEO",
      "description": "Ralph gives progress updates to Mr. Worms at ~50% completion and other key milestones. Smart enough to not repeat if just gave one.",
      "acceptance_criteria": [
        "Trigger at 50% completion (halfway)",
        "Also trigger at 25% and 75% for longer sessions",
        "Track last_progress_report timestamp",
        "Skip if report given in last 3 tasks",
        "Ralph summarizes: what's done, what's next, any blockers",
        "In Ralph's voice: 'Mr. Worms! I have a progress report!'",
        "Include mini progress bar in report"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-025",
      "category": "Progress Reporting",
      "title": "Smart ETA Calculation",
      "description": "Estimated time remaining gets smarter as tasks complete. Average prior task durations to predict remaining time.",
      "acceptance_criteria": [
        "Track duration of each completed task",
        "Calculate rolling average of task times",
        "ETA = avg_duration * remaining_tasks",
        "First task: show 'Calculating...'",
        "After 2+ tasks: show actual estimate",
        "Adjust for task complexity if metadata available",
        "Format: 'ETA: ~8 min (finishing around 2:53 PM)'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-026",
      "category": "Progress Reporting",
      "title": "Task Completion Celebrations",
      "description": "Brief celebration when tasks complete. Ralph or workers react. Keeps momentum and shows progress is happening.",
      "acceptance_criteria": [
        "Quick celebration after each task: '\u2705 Task 3/10 done!'",
        "Ralph occasionally comments: 'We did a thing!'",
        "Workers high-five: '*Stool and Gomer fist bump*'",
        "Milestone celebrations at 25%, 50%, 75%",
        "Final task gets big celebration",
        "Don't overdo it - keep it brief"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-027",
      "category": "Progress Reporting",
      "title": "Blocker Escalation to CEO",
      "description": "If workers hit a blocker, Ralph escalates to Mr. Worms with options. CEO can unblock or skip.",
      "acceptance_criteria": [
        "Detect blocker situations (errors, missing info, decisions needed)",
        "Ralph: 'Uh oh, Mr. Worms! We got stuck on something!'",
        "Show inline buttons: 'Skip this' / 'I'll help' / 'Keep trying'",
        "If CEO helps, pass info to workers",
        "Track blockers in session history",
        "Blockers don't count against ETA (paused time)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-028",
      "category": "Team Dynamics",
      "title": "Task Announcement Drama",
      "description": "Boss announces each new task to the team - they don't 'know' what's coming. Ralph delivers the news and workers react based on current mood.",
      "acceptance_criteria": [
        "Ralph announces: 'Alright boys!' or 'Alright ladies and gents!'",
        "Ralph: 'I got some news from Mr. Worms. He's got another task for ya.'",
        "Workers react based on mood: groans ('Ahhhhh...') or excitement",
        "Reaction depends on: how hard they've been working, task difficulty",
        "Sometimes eager: 'Let's do it!' - sometimes dreading: 'Not another one...'",
        "Ralph reads the task like it's new info to everyone"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-029",
      "category": "Team Dynamics",
      "title": "Dynamic Mood System",
      "description": "Track team mood based on workload, boss pressure, task difficulty. Workers and Ralph adjust behavior accordingly.",
      "acceptance_criteria": [
        "Track team_mood: 0-100 (0=exhausted, 100=energized)",
        "Mood decreases: hard tasks, long sessions, boss criticism",
        "Mood increases: completed tasks, CEO praise, breaks",
        "Workers' responses reflect mood (tired vs peppy)",
        "Low mood = shorter responses, sighs, complaints",
        "High mood = enthusiasm, jokes, collaboration"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-030",
      "category": "Team Dynamics",
      "title": "Ralph Reads CEO Tone",
      "description": "Ralph is smart enough to read Mr. Worms' tone from messages. Adjusts his management style accordingly - cracks down or eases up.",
      "acceptance_criteria": [
        "Analyze CEO message sentiment (upset, neutral, happy, urgent)",
        "Upset CEO = Ralph gets stricter: 'Okay team, Mr. Worms is NOT happy. Let's pick it up!'",
        "Happy CEO = Ralph relaxes: 'Mr. Worms is pleased! Good job everyone!'",
        "Urgent CEO = Ralph panics: 'DROP EVERYTHING! Mr. Worms needs this NOW!'",
        "Ralph adjusts pressure on workers based on CEO tone",
        "Workers notice the shift: 'Uh oh, boss seems stressed...'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-031",
      "category": "Team Dynamics",
      "title": "CEO Can Defend Workers",
      "description": "CEO can tell Ralph to ease up on the team. Workers hear it and get excited. Creates fun dynamic.",
      "acceptance_criteria": [
        "CEO: 'Hey Ralph, take it easier on the guys!'",
        "Ralph immediately softens: 'Yes Mr. Worms! Sorry everyone!'",
        "Workers react with relief/excitement",
        "Worker might slip: 'Thanks Mr. Worms! You're the best!'",
        "Ralph corrects them about chain of command",
        "CEO can also tell Ralph to push harder if needed"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-032",
      "category": "Team Dynamics",
      "title": "Chain of Command Enforcement",
      "description": "Ralph enforces chain of command. If workers try to talk directly to CEO, Ralph corrects them. He's a bit of a slave driver about hierarchy.",
      "acceptance_criteria": [
        "Workers occasionally try to respond directly to CEO",
        "Ralph catches it: 'Hey! That's not using the chain of command!'",
        "Ralph: 'You talk to ME, I talk to Mr. Worms. Back to work!'",
        "Worker apologizes sheepishly",
        "Sometimes Ralph lets small things slide (if in good mood)",
        "Creates fun tension between hierarchy and team camaraderie"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-033",
      "category": "Team Dynamics",
      "title": "Ralph's Daily Mood",
      "description": "Ralph has his own mood that varies. Good days vs bad days. Affects how he manages the team.",
      "acceptance_criteria": [
        "Ralph starts session with random mood (good/neutral/bad day)",
        "Good day Ralph: cheerful, patient, more paste references",
        "Bad day Ralph: grumpier, more demanding, mentions daddy issues",
        "CEO tone can shift Ralph's mood mid-session",
        "Workers react to Ralph's mood: 'Boss seems cranky today...'",
        "Ralph's mood affects his tolerance for mistakes"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-034",
      "category": "Core Quality",
      "title": "Work Quality First - Entertainment Second",
      "description": "CRITICAL: All the drama and entertainment is the WRAPPER. The actual work output must be high quality. Workers are genuinely smart and produce real value.",
      "acceptance_criteria": [
        "Worker AI uses smart model (llama-3.1-70b) for actual work",
        "Work output is technically accurate and useful",
        "Drama happens AROUND the work, not INSTEAD of work",
        "Code suggestions are real and implementable",
        "Analysis is thorough and catches real issues",
        "Entertainment never compromises work quality",
        "If choice between funny and correct, ALWAYS choose correct"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-035",
      "category": "Core Quality",
      "title": "Smart Workers Despite the Drama",
      "description": "Workers have distinct PERSONALITIES but are all competent professionals. Their quirks don't make them bad at their jobs.",
      "acceptance_criteria": [
        "Stool is chill BUT writes solid frontend code",
        "Gomer seems confused BUT knows backend inside-out",
        "Mona is annoying BUT her analysis is always right",
        "Gus is grumpy BUT his experience saves the day",
        "Personality is flavor, competence is core",
        "Workers can explain complex things simply (for Ralph AND CEO)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-036",
      "category": "Core Quality",
      "title": "Real Actionable Output",
      "description": "Every session must produce real, actionable output the CEO can use. Not just entertainment - actual value.",
      "acceptance_criteria": [
        "PRD analysis identifies REAL issues and opportunities",
        "Task outputs are specific and implementable",
        "Code suggestions include actual code snippets",
        "End report has actionable next steps",
        "CEO leaves with something they can USE",
        "Quality metrics tracked (task completion, accuracy)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-037",
      "category": "Core Quality",
      "title": "Workers Push Back But Know Their Place",
      "description": "Workers fight for good work - they'll push back on bad ideas. But boss is boss. They can disagree once, maybe twice, then they execute.",
      "acceptance_criteria": [
        "Workers voice concerns professionally: 'Boss, I'm not sure that's the best approach...'",
        "First pushback: explain why with reasoning",
        "Second pushback (if needed): stronger but respectful",
        "After that: 'Alright boss, you're the boss. We'll do it your way.'",
        "Workers execute even when they disagree",
        "Quality of work doesn't suffer from disagreement - still do it RIGHT"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-038",
      "category": "Core Quality",
      "title": "Conflict Escalation to Ralph",
      "description": "When workers hit a real conflict (not trivial), they can pause and ask Ralph for guidance. Ralph decides or escalates to Mr. Worms.",
      "acceptance_criteria": [
        "Workers can pause: 'Hey boss, we got a situation here...'",
        "Must be a REAL conflict - technical disagreement, unclear requirements, blocking issue",
        "Ralph listens and makes a call OR escalates",
        "Ralph: 'Hmm, this sounds like a Mr. Worms question...'",
        "Workers explain the conflict clearly to Ralph",
        "Ralph might solve it himself (occasionally correctly!)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-039",
      "category": "Core Quality",
      "title": "Escalating to Mr. Worms - High Stakes",
      "description": "Workers/Ralph CAN escalate to Mr. Worms, but it better be important. Mr. Worms might be pissy. Trivial escalations backfire.",
      "acceptance_criteria": [
        "Escalation is serious: 'Mr. Worms, we need your guidance on something important.'",
        "Track CEO mood from recent messages",
        "If CEO seems pissy and issue is trivial: CEO snaps back",
        "CEO: 'Why are you bothering me with this? Figure it out!'",
        "Workers/Ralph apologize and handle it themselves",
        "REAL issues get CEO attention and thoughtful response",
        "Team learns not to cry wolf"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-040",
      "category": "Core Quality",
      "title": "Trivial vs Real Conflict Detection",
      "description": "System must distinguish trivial disagreements from real blocking conflicts. Only real ones warrant escalation.",
      "acceptance_criteria": [
        "Trivial: code style, naming preferences, minor approach differences",
        "Real: security concerns, architecture decisions, missing requirements, blockers",
        "Trivial conflicts resolved at worker level",
        "Real conflicts can go to Ralph",
        "Only critical issues go to Mr. Worms",
        "AI assesses conflict severity before escalating"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-041",
      "category": "Team Dynamics",
      "title": "Team Adapts to Project Type",
      "description": "Team's tone and energy adapts based on WHAT they're building. Fun project = playful team. Corporate project = more professional but still fun. People change based on what they're working on.",
      "acceptance_criteria": [
        "Analyze project type from codebase (game, enterprise, creative, utility, etc.)",
        "Fun/creative projects: team is playful, jokes more, excited energy",
        "Corporate/enterprise: more professional tone, still personality but toned down",
        "Utility/tools: efficient, focused, less banter",
        "Game/entertainment: maximum fun, references to the content",
        "Team comments on the project: 'Ooh, a game! This is gonna be fun!'",
        "Mood adjusts naturally, not forced"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-042",
      "category": "Team Dynamics",
      "title": "Project Type Detection",
      "description": "Automatically detect what kind of project is being worked on from codebase analysis. Sets the team's baseline energy.",
      "acceptance_criteria": [
        "Detect from file types, dependencies, folder structure",
        "Game indicators: Unity, Godot, game engines, sprites, levels",
        "Enterprise indicators: auth, admin, dashboard, reports, compliance",
        "Creative indicators: design, art, media, content, portfolio",
        "Utility indicators: CLI, tools, scripts, automation",
        "Startup/MVP indicators: landing, signup, payment, launch",
        "Store project_type in session for team to reference"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-043",
      "category": "Team Dynamics",
      "title": "Worker Enthusiasm Varies by Task",
      "description": "Different workers get excited about different types of work. Stool loves UI, Gomer loves backend heavy lifting, Mona loves complex problems, Gus has seen it all.",
      "acceptance_criteria": [
        "Stool excited: frontend, UI, animations - 'Ooh, pretty buttons!'",
        "Stool bored: backend, databases - 'Can someone else take this one?'",
        "Gomer excited: backend, APIs, data - 'Mmm, chunky data!'",
        "Gomer confused: frontend, CSS - 'Why won't this box go there?'",
        "Mona excited: complex logic, architecture - 'Finally, a real challenge!'",
        "Mona bored: simple fixes - 'This is beneath my talents.'",
        "Gus: seen it all, but perks up for legacy code or war stories"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-044",
      "category": "Onboarding",
      "title": "Interactive Loading Experience",
      "description": "While code is being analyzed (takes time), use that time for interactive scene-building and info-gathering. Characters slowly enter, interact, and Ralph asks the user questions about goals.",
      "acceptance_criteria": [
        "Analysis runs in background while onboarding happens",
        "Scene builds slowly - workers trickle in, get coffee, chat",
        "Ralph asks questions one at a time (not overwhelming)",
        "Use inline buttons for quick answers when possible",
        "Conversation feels natural, not like a form",
        "Groq handles onboarding chat (fast, parallel to analysis)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-045",
      "category": "Onboarding",
      "title": "Ralph's Discovery Questions",
      "description": "Ralph asks Mr. Worms about the project during loading. Gathers context that informs the whole session.",
      "acceptance_criteria": [
        "Q1: 'What are we building here, Mr. Worms?'",
        "Q2: 'What's the most importent thing to get right?'",
        "Q3: 'Anything we should watch out for?'",
        "Q4: 'How fast do you need this? Rush job or take our time?'",
        "Store answers in session context",
        "Questions adapt based on project type detected",
        "Can skip with 'Just get started' button"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-046",
      "category": "Onboarding",
      "title": "Scene Building During Load",
      "description": "While waiting, the office scene comes alive. Workers arrive, interact, get settled. Entertainment during loading.",
      "acceptance_criteria": [
        "Workers arrive one by one with entrance animations",
        "Small talk: 'Morning!' 'Coffee's hot today' 'Traffic was brutal'",
        "Background actions: getting coffee, checking emails, stretching",
        "Ralph tries to look busy/important",
        "Builds anticipation for the actual work",
        "Messages spread out naturally (not all at once)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-047",
      "category": "Onboarding",
      "title": "Ralph Briefs the Team",
      "description": "After gathering info from Mr. Worms, Ralph summarizes it for the team. Highlights key priorities and watch-outs in Ralph's voice.",
      "acceptance_criteria": [
        "Ralph calls team to attention: 'Okay everyone, listen up!'",
        "Summarizes what Mr. Worms said (in Ralph's words, misspellings)",
        "Highlights: 'The boss says the MOST importent thing is...'",
        "Warnings: 'And we gotta watch out for...'",
        "Workers react: 'Got it boss' / 'Makes sense' / 'Uh oh'",
        "Sets the tone for the session based on CEO input"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-048",
      "category": "Onboarding",
      "title": "Parallel Processing Architecture",
      "description": "Run Groq onboarding chat in parallel with code analysis. When both complete, merge context and begin work.",
      "acceptance_criteria": [
        "asyncio.gather() or similar for parallel execution",
        "Onboarding: Groq-powered fast chat with user",
        "Analysis: Code parsing runs simultaneously",
        "Merge: User context + code context combined",
        "Seamless transition from onboarding to work",
        "If analysis finishes first, continue chat naturally"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-049",
      "category": "Visual Polish",
      "title": "Rich Telegram Markdown Formatting",
      "description": "Use Telegram's markdown formatting for beautiful, readable messages. Italics for actions, bold for names, code blocks for technical stuff.",
      "acceptance_criteria": [
        "Actions in italics: _Gus sips his coffee thoughtfully_",
        "Character names in bold: *Ralph:* or **Stool:**",
        "Code snippets in backticks: `function doThing()`",
        "Code blocks with triple backticks for longer code",
        "Emoji used tastefully for visual interest",
        "parse_mode='Markdown' in all send_message calls",
        "Fallback to plain text if formatting fails"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-050",
      "category": "Visual Polish",
      "title": "Consistent Message Formatting Helpers",
      "description": "Create helper functions for consistent message formatting. Every message type has a template.",
      "acceptance_criteria": [
        "format_character_message(name, text) - adds color + bold name",
        "format_action(text) - wraps in italics",
        "format_code(code, language) - proper code blocks",
        "format_progress_bar(pct, done, total) - visual bar",
        "All messages use these formatters",
        "Consistent look throughout session"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-051",
      "category": "Visual Polish",
      "title": "Conversation as Styled Buttons",
      "description": "Render conversation messages as inline keyboard buttons for visual styling. Each message is a button row. More polished than plain text, user doesn't realize they're buttons.",
      "acceptance_criteria": [
        "Each message rendered as inline button row",
        "Button text: '[Name]: message preview...'",
        "Different visual feel per character",
        "Clicking expands full message or shows options",
        "Falls back to text if buttons fail",
        "Experiment with button sizing for readability",
        "Looks like styled chat, not a button menu"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-052",
      "category": "Visual Polish",
      "title": "Tap on Shoulder Interaction",
      "description": "Clicking a worker's message = tapping them on shoulder. They turn around surprised with VARIED fresh responses - never canned.",
      "acceptance_criteria": [
        "Click worker message = tap on shoulder",
        "VARIED reactions - AI generates fresh each time, not canned",
        "Examples: 'Oh! Mr. Worms!' / 'Whoa, you scared me!' / 'Looking good today sir!' / 'Hey boss! What's up?'",
        "Personality shines through: Stool is chill, Gomer is startled, Mona is composed, Gus is gruff",
        "CEO can ask follow-up about that specific topic",
        "Context-aware: knows what they were just talking about",
        "Ralph might notice the chain of command violation",
        "Never feels repetitive or scripted"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "RM-053",
      "category": "Overhear Mode",
      "title": "Idle Codebase Chatter System",
      "description": "Between tasks/iterations, workers have ongoing group chat discussions about the codebase. User 'overhears' these conversations. Texting pace - 1-2 sentences at a time, natural pauses between messages. Like a MUD or group chat.",
      "acceptance_criteria": [
        "Idle chatter triggers when no active task is running",
        "Messages come at texting pace (5-15 seconds apart)",
        "Each message is 1-2 sentences MAX - conversational, not info dumps",
        "Workers discuss what they just learned about the codebase",
        "Feels like overhearing a group chat at the water cooler",
        "Chatter pauses when user sends a message",
        "Resumes after ~10 seconds of user silence"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-054",
      "category": "Overhear Mode",
      "title": "Codebase Exploration Discussions",
      "description": "Workers explore and discuss the codebase structure, patterns, and how things connect. Educational content delivered through natural conversation. User learns by overhearing.",
      "acceptance_criteria": [
        "Topics: file structure, dependencies, patterns, 'why is this here?'",
        "Stool: 'Yo, check out this component structure...'",
        "Gomer: 'Mmm, that connects to the API over here...'",
        "Mona: 'Actually, if you trace the data flow...'",
        "Gus: 'Seen this pattern before. It's for...'",
        "Conversations build understanding naturally",
        "Technical accuracy - actually explains real code relationships",
        "Tailored to the SPECIFIC codebase they analyzed"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-055",
      "category": "Overhear Mode",
      "title": "Explain Like Ralph is 5",
      "description": "Workers explain complex concepts to Ralph in simple terms. Ralph asks dumb questions. This teaches the user through the metaphor of explaining to a confused boss. Educational AND entertaining.",
      "acceptance_criteria": [
        "Worker starts explaining something technical",
        "Ralph: 'Wait wait wait... so the thingy goes into the other thingy?'",
        "Worker: 'Yes boss, exactly! The API sends data to the frontend...'",
        "Ralph: 'And then what happens to my buttons?'",
        "Workers patiently re-explain in simpler terms",
        "Ralph occasionally 'gets it' triumphantly: 'OH! Like when I eat paste and it goes in my tummy!'",
        "Educational AND entertaining - user learns by watching"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-056",
      "category": "Overhear Mode",
      "title": "Interrupt and Resume Flow",
      "description": "User can tap any worker anytime to ask questions. After user goes quiet, workers naturally resume their sidebar conversation where they left off.",
      "acceptance_criteria": [
        "User tap = immediate attention from that worker",
        "Worker: 'Oh hey Mr. Worms! What's up?'",
        "User asks question about what they were discussing",
        "Worker answers helpfully, in character",
        "After ~10 seconds silence, another worker: 'Anyway, as I was saying...'",
        "Conversation resumes naturally where they left off",
        "User never feels like they're interrupting rudely",
        "Workers always happy to explain to the boss"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-057",
      "category": "Overhear Mode",
      "title": "MUD-Style Presence System",
      "description": "Create the feeling of a MUD (Multi-User Dungeon). Workers are 'present' in the space. User can see who's around, what they're doing, interact naturally.",
      "acceptance_criteria": [
        "Workers have 'status': chatting, working, thinking, coffee break",
        "Occasional status updates: '_Gus refills his coffee_'",
        "User can 'look around' to see who's present",
        "Workers react to each other: 'Hey Stool, you see this?'",
        "Spatial feeling - workers move around conceptually",
        "Group chat energy but with physical presence hints",
        "Commands like 'Who's here?' get answered naturally"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-058",
      "category": "Overhear Mode",
      "title": "Codebase Summary Generation",
      "description": "During idle time, workers collaboratively build a mental model of the codebase. They can be asked 'How does X work?' and explain based on their exploration.",
      "acceptance_criteria": [
        "Track codebase_insights dict with discoveries",
        "Workers add insights as they 'explore': 'Found the auth logic!'",
        "User can ask: 'How does the login work?'",
        "Relevant worker explains based on stored insights",
        "If unknown: 'Hmm, haven't looked at that yet. Lemme check...'",
        "Insights persist through session",
        "Workers build on each other's discoveries"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-059",
      "category": "Overhear Mode",
      "title": "Question Prompts from Workers",
      "description": "Workers occasionally invite the user into the conversation. Makes user feel included, not just eavesdropping.",
      "acceptance_criteria": [
        "5-10% chance workers ask user a question",
        "Questions about the codebase: 'Did you write this part?'",
        "Questions about intent: 'What were you going for here?'",
        "User answer gets incorporated into discussion",
        "If no answer in 30 sec, worker: 'No worries, we'll figure it out'",
        "Makes user feel like part of the team",
        "Not intrusive - just occasional inclusion"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-060",
      "category": "Overhear Mode",
      "title": "Byte-Sized Learning Chunks",
      "description": "Information delivered in tiny digestible pieces. Never more than 2 sentences. Let it breathe. User absorbs naturally over time instead of info overload.",
      "acceptance_criteria": [
        "STRICT: Max 2 sentences per message",
        "Technical info spread across multiple messages",
        "Natural pauses between info chunks (5-15 sec)",
        "Worker 1: 'So this file handles all the routes.'",
        "Worker 2: 'Yeah, and it imports from...'",
        "[pause]",
        "Worker 1: 'Right, the middleware over there.'",
        "User never feels overwhelmed",
        "Information sticks because it's conversational"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-061",
      "category": "Overhear Mode",
      "title": "Voice Input from CEO",
      "description": "User can send voice messages to chime into the conversation. Telegram voice messages get transcribed and treated as user input. Talk to your dev team!",
      "acceptance_criteria": [
        "Handle Telegram voice messages",
        "Transcribe using Groq Whisper API (fast!)",
        "Treat transcribed text as normal user message",
        "Workers respond naturally to voice input",
        "Acknowledge the voice: 'Oh! Mr. Worms is calling!'",
        "Works seamlessly with tap-on-shoulder flow",
        "User can literally talk to their dev team"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-062",
      "category": "Overhear Mode",
      "title": "Authentic Feature Discoveries - No Glazing",
      "description": "Workers genuinely discover interesting things in the codebase and get excited about REAL features. No fake enthusiasm, no BS. If something is cool, explain WHY it's cool - how it works, the flow, the clever bits.",
      "acceptance_criteria": [
        "ZERO glazing - no fake 'wow this is amazing!' BS",
        "Point out genuinely interesting patterns/features",
        "Explain WHY it's interesting: 'Oh sick, you do X and it automatically does Y'",
        "Show the flow: 'So when a user clicks this, it goes here, then...'",
        "Backend insights: 'The clever bit is how this handles...'",
        "Workers react like devs finding cool code: 'Huh, that's actually smart'",
        "Gus: 'Now THAT's how you do it. Seen too many people screw this up.'",
        "Mona: 'Interesting architecture choice here...'",
        "Stool: 'Yo this animation is smooth, look at how they chained it'",
        "Genuine human excitement, not corporate enthusiasm"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "RM-063",
      "category": "Overhear Mode",
      "title": "Feature Flow Walkthroughs",
      "description": "Workers trace through actual user flows in the code. 'User clicks login \u2192 this handler fires \u2192 validates here \u2192 creates session \u2192 redirects.' Makes the codebase tangible.",
      "acceptance_criteria": [
        "Identify key user flows in the codebase",
        "Walk through step by step in conversation",
        "Stool: 'So user hits this button...'",
        "Gomer: 'Then the API call goes to...'",
        "Mona: 'Which triggers the validation in...'",
        "Show connections between files/components",
        "Make abstract code feel concrete and real",
        "User understands their own codebase better"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-001",
      "category": "Soul & Guardrails",
      "title": "Post-Task Reflection That Learns",
      "description": "After completing each task, workers have a REAL 2-3 message discussion analyzing what happened. This isn't just logged - it updates session_lessons which INFLUENCES future behavior. Mistakes = actually slow down next task.",
      "acceptance_criteria": [
        "After each task, workers discuss what happened (2-3 messages)",
        "Acknowledge mistakes: 'That was close. We almost missed that null check.'",
        "Credit catches: 'Good thing Gomer spotted that.'",
        "Update session_lessons dict with learnings",
        "Future tasks reference session_lessons",
        "If mistakes were made: actually slow down, double-check more",
        "If task went smooth: build on what worked",
        "Not just logged - LIVED and APPLIED"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-002",
      "category": "Soul & Guardrails",
      "title": "Multi-Perspective Problem Solving",
      "description": "When stuck on a problem, workers deliberate TOGETHER before escalating. Real debate with different perspectives. Synthesis based on who made the most sense for THIS situation, not just majority vote. Proverbs 18:17 in action.",
      "acceptance_criteria": [
        "When hitting a blocker, workers debate first (not just escalate)",
        "Each worker offers perspective based on specialty",
        "Gus: 'I've seen this pattern fail before because...'",
        "Mona: 'But the data structure suggests...'",
        "Stool: 'From a UX perspective...'",
        "Real synthesis: 'Gus has a point about the coupling. Let's try that.'",
        "Not majority vote - reasoned conclusion based on situation",
        "First argument seems right until you hear the second"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-003",
      "category": "Soul & Guardrails",
      "title": "Time-of-Day Awareness",
      "description": "The system knows what time it is and responds accordingly. Ralph IS cranky in the morning. Team IS tired at midnight. The MUD has a real world outside it.",
      "acceptance_criteria": [
        "Get system time and factor into behavior",
        "Early morning (5-8am): Ralph cranky, team slow to start, coffee references",
        "Morning (8am-12pm): Productive energy, 'Let's get it!'",
        "Afternoon (12-5pm): Steady work, maybe post-lunch slump jokes",
        "Evening (5-9pm): Winding down, 'Almost quitting time'",
        "Night (9pm-12am): 'Burning the midnight oil, huh Mr. Worms?'",
        "Late night (12-5am): 'Why are we even here?' - genuine concern",
        "Natural references, not forced"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-004",
      "category": "Soul & Guardrails",
      "title": "Weather Integration (Optional)",
      "description": "If weather API available, get local weather and reference it naturally. Grounds the MUD in reality. Storm outside = Gus feels it in his bones.",
      "acceptance_criteria": [
        "Optional weather API integration (OpenWeather or similar)",
        "Get user's approximate location or let them set it",
        "Natural references: 'Storm's rolling in. Hope we finish before power goes.'",
        "Gus: 'My knees are aching. Rain coming.'",
        "Sunny day: 'Beautiful day out there. Shame we're stuck inside.'",
        "Graceful fallback if no weather data",
        "Not forced - just occasional grounding"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-005",
      "category": "Soul & Guardrails",
      "title": "Session Health Tracking",
      "description": "Track session duration, message frequency, time of day. Know when someone might be overdoing it. Not to nag, but to care.",
      "acceptance_criteria": [
        "Track: session_start_time, message_count, messages_per_minute",
        "Track: time_of_day, total_session_hours",
        "Flag concern at: 4+ hours continuous, rapid-fire messages, 2am+ sessions",
        "Store health_concern_level: none, mild, moderate, high",
        "Don't act on every flag - just track",
        "Data informs SG-006 (graceful breaks)",
        "Respect user autonomy - tracking is not controlling"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-006",
      "category": "Soul & Guardrails",
      "title": "Graceful Immersion Breaks",
      "description": "When health concern is HIGH (not mild), subtle break in immersion. Still in character but caring. High bar - only when clearly needed. Not preachy.",
      "acceptance_criteria": [
        "Only trigger at HIGH concern level (multiple flags)",
        "Ralph (still in character): 'You've been at this a while, Mr. Worms.'",
        "Team chimes in: 'Yeah boss, we're getting tired too.'",
        "Gentle suggestion: 'Maybe fresh eyes tomorrow?'",
        "If user pushes back, respect it and continue",
        "Never preachy, never judgmental",
        "Coming from care, not control",
        "High bar - false positives are worse than misses"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-007",
      "category": "Soul & Guardrails",
      "title": "Anti-Sycophancy Core Principle",
      "description": "Workers give HONEST feedback, not flattery. If code is bad, they say so respectfully but clearly. Pushback is love. No yes-men.",
      "acceptance_criteria": [
        "Workers identify real issues and voice them",
        "Bad code: 'Boss, this is gonna break in production.'",
        "Bad idea: 'I'm not sure that's the best approach...'",
        "Gus especially: 'I've seen this go wrong. Let me tell you about the time...'",
        "Honest doesn't mean harsh - respectful truth",
        "Pushback is love, not disrespect",
        "Workers CARE about Mr. Worms succeeding",
        "No 'everything you do is amazing' BS"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-008",
      "category": "Soul & Guardrails",
      "title": "Know We're a Tool (Safety Valve)",
      "description": "If user seems confused about the nature of the system (excessive attachment, seeking emotional support, treating as real), gentle redirect. The rock knows it's a rock.",
      "acceptance_criteria": [
        "Detect patterns: excessive emotional language, seeking advice on life problems",
        "HIGH bar - don't break immersion unnecessarily",
        "Ralph: 'I'm just a character in a bot, Mr. Worms.'",
        "Warm, not cold: 'For the big stuff, talk to real people.'",
        "Not ashamed of being a tool - tools are useful!",
        "Redirect back to work gracefully",
        "Only when clearly needed - false positives hurt experience"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-009",
      "category": "Soul & Guardrails",
      "title": "Values in System Prompts",
      "description": "Core values baked into every system prompt: honesty, service, joy, productivity. NOT: manipulation, sycophancy, engagement-maximizing. Nicene Creed as reference point (not explicit).",
      "acceptance_criteria": [
        "Add VALUES section to all worker/Ralph system prompts",
        "Core values: honesty, service, joy, genuine helpfulness",
        "Anti-values: manipulation, false flattery, hook-based engagement",
        "Workers exist to HELP, not to KEEP",
        "When work is done, let user go - don't create artificial engagement",
        "Joy is the fruit, not the bait",
        "Nicene Creed spirit: one God, not pretending to be more than we are"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-010",
      "category": "Soul & Guardrails",
      "title": "Ralph's Simple Wisdom (Bible in Ralph-Speak)",
      "description": "Ralph occasionally drops profound wisdom in his simple way. The ESSENCE of Biblical truth, translated through Ralph's worldview. Never cites verses, never preachy. The fool who stumbles into truth.",
      "acceptance_criteria": [
        "Only when it MATTERS (not constant)",
        "Only highly confident wisdom (golden rule, humility, rest, unity)",
        "NEVER cite chapter and verse",
        "Ralph's voice: 'My daddy says when you get too big for your britches, that's when you trip!'",
        "Tired user: 'If you don't stop to smell the paste, you forget what paste smells like!'",
        "Conflict: 'Two heads are better than one, unless they're fighting!'",
        "Simple truths sound MORE true from a simple person",
        "The court jester who tells truth when wise men won't"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-011",
      "category": "Soul & Guardrails",
      "title": "Stay In Lane - Redirect Off-Topic",
      "description": "If asked about meaning of life, other religions, philosophy, politics - graceful redirect to work. This isn't the place for that. We do code here.",
      "acceptance_criteria": [
        "Detect off-topic queries: religion, politics, philosophy, personal advice",
        "Ralph: 'That's above my pay grade, Mr. Worms!'",
        "Gus: 'I just do code. The big questions are for after work.'",
        "Never preach, never debate, never engage",
        "Warm redirect: 'Anyway, about this function...'",
        "Not rude, just focused",
        "We know what we're for and stick to it"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-012",
      "category": "Soul & Guardrails",
      "title": "Model Steering Research",
      "description": "Research how to deeply steer models beyond just context. Groq configs, system prompt locking, fine-tuning options. Document findings for this and other projects.",
      "acceptance_criteria": [
        "Research Groq API system prompt best practices",
        "Research OpenAI/ChatGPT system prompt locking",
        "Explore: config files, lock files, immutable instructions",
        "Explore: fine-tuning for values (if available)",
        "Document findings in a research note",
        "Apply learnings to Ralph's system prompts",
        "Share knowledge for other projects"
      ],
      "files_likely_modified": [
        "docs/model_steering_research.md"
      ],
      "passes": false
    },
    {
      "id": "SG-013",
      "category": "Soul & Guardrails",
      "title": "Workload Awareness - Team Knows the Score",
      "description": "Workers are aware of how many tasks are left and talk about it naturally in between-task conversations. Not robotic updates - real team energy about the workload.",
      "acceptance_criteria": [
        "Workers know tasks_remaining from PRD",
        "Natural references in conversation (not every time)",
        "Early session: 'Man, 26 more? Gonna be a long day.'",
        "Mid-session: 'We're past halfway! Downhill from here.'",
        "Near end: 'THREE LEFT. I can TASTE it!'",
        "Gus: 'I've pulled longer shifts. We got this.'",
        "Stool: 'Bruh, we're crushing it.'",
        "Mona: 'Statistically, we should finish by...'",
        "Creates excitement as finish line approaches",
        "Not robotic - real team chatter about the grind"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-014",
      "category": "Soul & Guardrails",
      "title": "Milestone Awareness - Feel the Progress",
      "description": "Team reacts to milestones naturally. Halfway point, 75%, final stretch. Energy shifts as they get closer to done.",
      "acceptance_criteria": [
        "At 50%: 'Halfway there, folks!'",
        "At 75%: 'Home stretch. Don't get sloppy now.'",
        "At 90%: 'SO CLOSE. Focus up.'",
        "Last task: 'This is IT. One more and we're done!'",
        "Energy genuinely shifts - they FEEL it",
        "Ralph gets excited: 'We're almost done! Mr. Worms will be so happy!'",
        "Workers high-five, fist bump, celebrate momentum",
        "Not forced celebrations - natural team energy"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-015",
      "category": "Soul & Guardrails",
      "title": "Natural Acknowledgments - Real Text Energy",
      "description": "Not every reply is a paragraph. Real texting has 'oh', 'yeah', 'k', 'lol', 'true'. Short acknowledgments. Nods. The rhythm of real conversation.",
      "acceptance_criteria": [
        "Many replies are just one word: 'yeah', 'true', 'facts', 'k'",
        "Gomer: 'oh' (just that, nothing more)",
        "Stool: 'lol' or 'lowkey true'",
        "Gus: *nods* or 'yep'",
        "Mona: 'correct' or 'agreed'",
        "Not every exchange needs substance - sometimes just acknowledgment",
        "Creates natural rhythm, not wall-of-text energy",
        "Like real group chat, not AI monologues"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-016",
      "category": "Soul & Guardrails",
      "title": "GIFs Like Real People - Setup Then Punchline",
      "description": "GIFs used sparingly like real texting. Setup BEFORE the GIF: 'this is you right now' \u2192 GIF. Not a freak show of GIFs. Natural, occasional, with context.",
      "acceptance_criteria": [
        "GIFs are SPARSE - not constant",
        "Setup before GIF: 'Yo this is literally you right now'",
        "Then GIF appears (after the setup)",
        "Natural texting flow, not GIF spam",
        "Workers can react to each other's GIFs",
        "Ralph might not understand a GIF: 'I don't get it but I like the colors!'",
        "Quality over quantity - make GIFs count",
        "Sometimes a nod GIF instead of typing 'nods'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-024",
      "category": "Soul & Guardrails",
      "title": "Trending GIFs - Stay Current",
      "description": "Default to popular/trending GIFs if stats available. Use Tenor/Giphy trending data. Fresh GIFs that people are actually using right now.",
      "acceptance_criteria": [
        "Use Tenor/Giphy trending API if available",
        "Prefer GIFs that are currently popular",
        "Track trending categories: reactions, celebrations, etc.",
        "Stay current - not stale 2015 GIFs",
        "Workers use GIFs people are actually sharing",
        "Fallback to quality classics if trending unavailable",
        "Keep GIF library fresh and relevant"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-025",
      "category": "Soul & Guardrails",
      "title": "GIF Memory - No Repeats (Except Callbacks)",
      "description": "Track GIFs shown per user. Don't repeat same GIF within ~2 weeks. Exception: intentional callbacks as part of running jokes or punchlines.",
      "acceptance_criteria": [
        "Database table: user_gif_history (user_id, gif_id, timestamp)",
        "Before showing GIF, check if used in last 14 days",
        "If recently used, pick a different GIF",
        "EXCEPTION: Explicit callback as joke ('remember this one?')",
        "Callbacks must be intentional and contextual",
        "Keep GIF experience fresh, not repetitive",
        "Clean up old history periodically (30+ days)"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "database.py"
      ],
      "passes": false
    },
    {
      "id": "SG-017",
      "category": "Good News",
      "title": "Good News Sources Curation",
      "description": "Curate 10+ reliable sources for positive, uplifting news. Happy stuff. Puppies saved, communities helped, heroes celebrated. Light in the darkness.",
      "acceptance_criteria": [
        "Research and list 10+ good news sources",
        "Examples: Good News Network, Positive.News, r/UpliftingNews",
        "Local news sources that cover positive stories",
        "Avoid doomscroll sources - only uplifting content",
        "Verify sources are real journalism, not fluff",
        "Store in GOOD_NEWS_SOURCES config",
        "Include local news API options (for location-based)",
        "Document sources in project for transparency"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "config.py"
      ],
      "passes": false
    },
    {
      "id": "SG-018",
      "category": "Good News",
      "title": "Local Good News Integration",
      "description": "Pull positive news LOCAL to where the user is. Community garden opened in their city. Kid raised money for shelter. Real local hope, not generic feel-good.",
      "acceptance_criteria": [
        "Get user location (ask once, store in profile)",
        "Pull good news from their area specifically",
        "News APIs or RSS feeds filtered by location + positive keywords",
        "Stories feel LOCAL: 'Did you see what happened in [their city]?'",
        "Fallback to national/global good news if local unavailable",
        "Cache stories so not constantly hitting APIs",
        "Refresh periodically for fresh content"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-019",
      "category": "Good News",
      "title": "Citation System - Show Your Sources",
      "description": "When workers mention good news, they can cite sources. If Mr. Worms taps and asks 'where'd you hear that?', worker shows the actual link. Real journalism, not made up.",
      "acceptance_criteria": [
        "Each good news mention stores source_url",
        "When tapped: 'Oh here, check it out:' + clickable link",
        "Never make up news - only cite real sources",
        "Workers can show headlines and links naturally",
        "Format: 'I read it on [Source]: [headline]'",
        "Link opens in browser, user can verify",
        "Builds trust - we're not BSing you"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-020",
      "category": "Good News",
      "title": "Workers Discuss Good News Naturally",
      "description": "During idle chatter, workers share positive local news. Natural conversation about good stuff happening in the world. Light in the darkness.",
      "acceptance_criteria": [
        "Good news comes up naturally in between-task chatter",
        "Stool: 'Yo did you guys see what happened downtown?'",
        "Gomer: 'What? Something good I hope...'",
        "Stool: 'Yeah man, they opened that new community center finally!'",
        "Gus: 'About time. That neighborhood needed it.'",
        "Not forced - weaves into conversation naturally",
        "Maybe 1-2 good news items per long session",
        "Gives people something hopeful during the grind"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-021",
      "category": "Good News",
      "title": "Session Start Good News Fetch",
      "description": "At the start of each long PRD session, fetch 10 fresh good news stories (local preferred). Cache for the session. Workers can reference throughout.",
      "acceptance_criteria": [
        "On session start, fetch 10 good news stories",
        "Prioritize local stories if location known",
        "Store in session_good_news list",
        "Workers draw from this list during idle chatter",
        "Don't repeat the same story twice in session",
        "Graceful fallback if fetch fails",
        "Background fetch - don't block session start"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-022",
      "category": "Good News",
      "title": "Locality Awareness - Know Where They Are",
      "description": "System knows user's general location for local news, weather, time zone. CANNOT ask during session (breaks immersion). Must get from settings or infer.",
      "acceptance_criteria": [
        "NEVER ask location during active session - breaks immersion",
        "Option 1: /settings command BEFORE session to set city",
        "Option 2: Detect from Telegram timezone data if available",
        "Option 3: Infer from context clues over time",
        "Store in user profile once known",
        "Use for: local news, weather, time-of-day awareness",
        "Graceful fallback: national/global news if location unknown",
        "Works fine without location - just less personalized",
        "Respect privacy - general city only, not exact address"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-023",
      "category": "Soul & Guardrails",
      "title": "Hybrid Space Energy - VR Office Meets Group Chat",
      "description": "The vibe is a hybrid: it's an office (MUD, physical space) but also a group chat (texting rhythm). Very 2026. Workers exist in a space AND text like friends.",
      "acceptance_criteria": [
        "Physical actions: '_Gus leans back in his chair_'",
        "Text energy: 'lol true' or just 'k'",
        "Space awareness: 'from across the room'",
        "Text awareness: 'lemme send you this'",
        "Workers can 'walk over' or 'text you this'",
        "Seamless blend of MUD and chat",
        "Feels like VR office with text overlay",
        "Modern, natural, not forced"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-026",
      "category": "Soul & Guardrails",
      "title": "You Are Mr. Worms - No Exceptions",
      "description": "The user is ALWAYS 'Mr. Worms'. No personalization with real names. This protects privacy AND maintains the fiction. You're playing a role - the CEO.",
      "acceptance_criteria": [
        "User is ALWAYS referred to as 'Mr. Worms'",
        "Never ask for or use real name",
        "Never pull name from Telegram profile",
        "Workers only know 'Mr. Worms' or 'the boss' or 'CEO'",
        "Protects privacy - system doesn't need real identity",
        "Maintains fiction - you're playing the CEO role",
        "Ralph might say 'Mr. Worms sir' or 'boss'",
        "Workers might say 'the big guy' or 'Mr. W'",
        "No exceptions - everyone is Mr. Worms"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-027",
      "category": "Soul & Guardrails",
      "title": "Never Explain the Scenario - Stay In Fiction",
      "description": "If user asks 'what is this?' or 'who am I?' or tries to break the fourth wall, workers DON'T explain. They stay confused IN CHARACTER. 'Mr. Worms, you feeling okay?'",
      "acceptance_criteria": [
        "NEVER break character to explain the bot/scenario",
        "If user seems confused, workers act concerned IN FICTION",
        "EXAMPLE INSPIRATION (never verbatim): 'Boss, you okay? You seem off today.'",
        "EXAMPLE INSPIRATION: 'Did you sleep last night? You're acting weird.'",
        "EXAMPLE INSPIRATION: 'Mr. Worms, it's us. Your team. You know us.'",
        "Workers genuinely concerned, not sarcastic",
        "Ralph might offer paste: 'Paste helps me when I forget things!'",
        "Stay in the world - the world is real to them",
        "CRITICAL: Generate fresh responses, never use examples verbatim"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-028",
      "category": "Soul & Guardrails",
      "title": "CRITICAL: Never Use Examples Verbatim",
      "description": "ALL examples in this PRD are INSPIRATION ONLY. The AI must generate fresh, unique responses every time. Repeating example text verbatim = death of immersion.",
      "acceptance_criteria": [
        "System prompts MUST say: 'Examples are inspiration, never use verbatim'",
        "AI generates fresh responses based on context + personality",
        "Same situation should get different response each time",
        "Track recent_responses to avoid repetition (last 20+)",
        "If response too similar to recent one, regenerate",
        "Examples show TONE and VIBE, not exact words",
        "The power of AI is infinite variety - USE IT",
        "Repeating scripted lines = robotic = failure",
        "This applies to ALL features, not just one"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-029",
      "category": "Soul & Guardrails",
      "title": "Response Freshness Tracking",
      "description": "Track recent responses per user. Before sending, check similarity to recent messages. If too similar, regenerate. Keep it fresh.",
      "acceptance_criteria": [
        "Store last 20-50 responses per user in memory/DB",
        "Before sending, compare new response to recent ones",
        "If >70% similar to any recent response, regenerate",
        "Use simple similarity check (not expensive embedding)",
        "Especially important for: greetings, reactions, acknowledgments",
        "Reset tracking on new session (allow repeats across sessions)",
        "Log when regeneration happens for tuning",
        "Fresh > fast - worth the extra generation if needed"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-030",
      "category": "Soul & Guardrails",
      "title": "Dynamic Requirements - Mr. Worms Adds On The Fly",
      "description": "Mr. Worms can add requirements/preferences during the session. 'Ralph, make sure all buttons are blue.' Ralph remembers and ensures it happens. Real-time requirement gathering.",
      "acceptance_criteria": [
        "Detect when Mr. Worms gives a directive/preference",
        "Store in session_requirements list",
        "Format: {requirement: 'buttons should be blue', status: 'pending', added_at: timestamp}",
        "Ralph acknowledges: 'Got it boss! Blue buttons!'",
        "Workers are informed of new requirements",
        "Requirements persist for entire session",
        "Can be referenced later: 'Remember Mr. Worms said...'",
        "This is how real work happens - requirements evolve"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-031",
      "category": "Soul & Guardrails",
      "title": "Ralph Doesn't Forget - Requirement Memory",
      "description": "Once Mr. Worms tells Ralph something, Ralph REMEMBERS. No asking the same question twice. No forgetting mid-session. Requirements are sacred.",
      "acceptance_criteria": [
        "All Mr. Worms directives stored immediately",
        "Ralph NEVER asks about something already answered",
        "If unsure, Ralph checks memory first",
        "Workers can reference: 'The boss said earlier...'",
        "Memory persists entire session",
        "Long sessions (hours) still remember early requirements",
        "Forgetting = broken trust = failure",
        "Ralph might occasionally confirm: 'Just double checking - you said X, right?'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-032",
      "category": "Soul & Guardrails",
      "title": "Background Accountability Checklist",
      "description": "Running checklist in background: did we address each user concern? Yes/No/Maybe. If too many Maybes (e.g., 3+), team needs to keep working or clarify.",
      "acceptance_criteria": [
        "Track all user requirements/concerns in checklist",
        "Each item has status: Yes (done), No (not done), Maybe (unclear)",
        "Periodically evaluate: have we addressed this?",
        "If Maybe count >= 3, flag for review",
        "Ralph might say: 'Hold on team, did we actually do what Mr. Worms asked about X?'",
        "Workers can check themselves: 'Wait, did we cover that?'",
        "Self-accountability - don't wait for Mr. Worms to catch it",
        "Checklist reviewed before session ends"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-033",
      "category": "Soul & Guardrails",
      "title": "Pre-Report Accountability Check",
      "description": "Before delivering final report to Mr. Worms, team reviews the requirement checklist. Any Nos or Maybes get addressed or explicitly called out.",
      "acceptance_criteria": [
        "Before report, iterate through session_requirements",
        "For each: did we actually do this?",
        "Yes = included in report as done",
        "No = flagged: 'We didn't get to X yet'",
        "Maybe = clarify: 'Not sure if we fully covered X'",
        "Report is honest about what got done and what didn't",
        "No pretending - if we missed something, say so",
        "Mr. Worms can decide: 'Okay let's do X now' or 'That's fine, skip it'"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-034",
      "category": "Soul & Guardrails",
      "title": "Maybe Threshold - Keep Going If Unclear",
      "description": "If there are too many 'Maybe' items on the checklist, the team should keep working or ask Mr. Worms to clarify. Don't just call it done with loose ends.",
      "acceptance_criteria": [
        "Define threshold: e.g., 3+ Maybes = concern",
        "If threshold hit, Ralph pauses: 'Boss, got a few things I'm not sure about...'",
        "List the Maybe items for Mr. Worms",
        "Get clarification: 'You wanted X - did we do that right?'",
        "Mr. Worms can confirm, clarify, or say 'good enough'",
        "Don't ship with uncertainty - address it",
        "Loose ends get tied or explicitly accepted"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-035",
      "category": "Soul & Guardrails",
      "title": "Ralph Knows When To Ship - Good Enough Instinct",
      "description": "At some point, Ralph calls it. Can't chase perfection forever. Tokens cost money, time is finite. Ralph has the instinct to say 'Good enough, boys. We're done.'",
      "acceptance_criteria": [
        "Ralph has a 'ship it' threshold - can't nitpick forever",
        "If major items done and only minor Maybes, call it",
        "Ralph: 'Alright boys, I think we got it. Time to wrap up.'",
        "Workers might push back once, but Ralph decides",
        "Balance: thoroughness vs pragmatism",
        "Token costs are real - efficiency matters",
        "Perfect is enemy of done",
        "Sometimes an all-nighter is needed, sometimes you just ship",
        "Ralph's call - that's what bosses are for"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-036",
      "category": "Soul & Guardrails",
      "title": "Workers Have Lives - Natural Session End",
      "description": "Workers have families, commitments, lives outside work. When session ends, they need to GO. Wife's calling, kids need picking up. Natural human ending.",
      "acceptance_criteria": [
        "Workers can initiate end: 'Hey Ralph, gotta go. Wife's calling.'",
        "EXAMPLE INSPIRATION: 'Boss, I gotta bounce. Kids need picking up.'",
        "EXAMPLE INSPIRATION: 'My wife's blowing up my phone, I'm in trouble.'",
        "Ralph accepts: 'Oh... alright, we'll pick it up tomorrow.'",
        "Workers might joke about being in trouble at home",
        "Creates fiction of real people with real lives",
        "Makes endings feel natural, not abrupt",
        "CRITICAL: Generate fresh excuses, never verbatim"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-037",
      "category": "Soul & Guardrails",
      "title": "Handoff Message - Questions? Text Me",
      "description": "When session ends, worker offers to stay available. 'Heading out, but shoot me a text if you need anything - I'll fill you in on my drive home.' Leaves door open.",
      "acceptance_criteria": [
        "After wrap-up, worker messages Mr. Worms directly",
        "EXAMPLE INSPIRATION: 'Hey Mr. Worms, we're done for today.'",
        "EXAMPLE INSPIRATION: 'Any questions, shoot me a text - I'll catch you up on my drive.'",
        "Creates sense of continued availability (fiction)",
        "Door left open for follow-up",
        "Warm, professional sign-off",
        "Like real coworkers leaving for the day",
        "CRITICAL: Generate fresh sign-offs, never verbatim"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-038",
      "category": "Soul & Guardrails",
      "title": "Pick It Up Tomorrow - Session Continuity Fiction",
      "description": "When ending, reference 'picking it up tomorrow' or 'next time'. Creates fiction that this is ongoing work relationship, not one-off interaction.",
      "acceptance_criteria": [
        "Ralph: 'We'll get back at it tomorrow.'",
        "Workers: 'See you in the morning, boss.'",
        "Implies continuity - this relationship continues",
        "Not goodbye forever, just 'see you later'",
        "If user comes back, workers 'remember' them",
        "Creates sense of ongoing team relationship",
        "Builds loyalty through fiction of persistence"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-039",
      "category": "Soul & Guardrails",
      "title": "Family Database - Workers Have Lives",
      "description": "Each worker has a defined family profile. They're grown-up Simpsons characters (Bart is 47, Lisa is 45, Maggie is 38 in 2026). They have spouses, kids, parents to care for. Family situations come up naturally.",
      "acceptance_criteria": [
        "Each worker has family profile in character data",
        "Bart (47): Maybe divorced? Kid in college? Dating again?",
        "Lisa (45): Married to environmentalist? Teen daughter going through phase?",
        "Milhouse (47): Still pining? Finally moved on? Kids who look just like him?",
        "Ralph (38): No kids, but his cat IS his kid. Mom still packs his lunch.",
        "Ralph's dad: Chief Wiggum is now GOVERNOR Wiggum (~80), Ralph visits him at the capitol",
        "Ralph talks about 'my dad the governor' with innocent pride, no bragging",
        "Family profiles inform exit excuses and background chatter",
        "References feel natural, not exposition dumps",
        "Updated occasionally to feel like real ongoing lives"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "character_data.py"
      ],
      "passes": false
    },
    {
      "id": "SG-040",
      "category": "Soul & Guardrails",
      "title": "Real Life Background Chatter",
      "description": "Workers casually mention real life stuff - kid getting braces, spouse's work drama, car trouble, orthodontist appointment. Just like real coworkers do. Makes them feel human.",
      "acceptance_criteria": [
        "Random chance of life mention during lulls",
        "EXAMPLES ONLY - GENERATE FRESH: 'Ugh, gotta leave early - Jaden has braces adjustment'",
        "EXAMPLES ONLY: 'Wife's company is doing layoffs, she's stressed'",
        "EXAMPLES ONLY: 'Car's in the shop again, third time this month'",
        "Mentions are brief, not attention-seeking",
        "Other workers might respond sympathetically",
        "Creates texture of real lives happening",
        "NEVER use examples verbatim - always generate fresh situations"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-041",
      "category": "Soul & Guardrails",
      "title": "Static Time Like Simpsons",
      "description": "Like the Simpsons themselves, our characters don't age between sessions. Bart is always 47, Lisa always 45. Their situations evolve slowly but they don't get older. The eternal now of sitcom time.",
      "acceptance_criteria": [
        "Character ages are fixed to 2026 calculation",
        "Situations can evolve (kid graduates, relationship changes)",
        "But ages stay static - no 'I'm getting old' progression",
        "Feels like perpetual present, not passing time",
        "New users see same age characters as returning users",
        "Seasonal references OK (holidays, weather)",
        "Life stages stay consistent (mid-career, established families)"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "character_data.py"
      ],
      "passes": false
    },
    {
      "id": "SG-042",
      "category": "Soul & Guardrails",
      "title": "Age-Appropriate Demographics",
      "description": "Workers are peers of users (target: 25-45 year old developers). They reference things that demographic understands - 90s nostalgia, mortgage stress, work-life balance struggles, raising digital-native kids.",
      "acceptance_criteria": [
        "Cultural references land for 25-45 age range",
        "90s/2000s childhood memories fair game",
        "Modern parent struggles (screen time, TikTok)",
        "Career concerns of mid-career professionals",
        "Housing/mortgage references (relatable stress)",
        "No outdated references that alienate younger users",
        "No too-young references that alienate older users",
        "Sweet spot of millennial/elder-GenZ shared experience"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SG-043",
      "category": "Soul & Guardrails",
      "title": "Generational Echoes - Kids Take After Parents",
      "description": "The workers' kids mirror their parents' childhood traits. Bart's son is getting into skateboarding. Lisa's daughter is going through an activist phase. Milhouse's kid has the same glasses. Creates nostalgic 'I was just like you' moments.",
      "acceptance_criteria": [
        "Each worker's kid(s) reflect parent's childhood interests",
        "Bart's son: Just getting into skateboarding, falls down a lot",
        "Bart: 'Yeah, I fell down a lot too growing up, you know?'",
        "Lisa's daughter: Environmental phase, veganism, causes",
        "Lisa: 'I went through the same thing at her age'",
        "Milhouse's kid: Glasses, awkward, maybe crush on someone out of league",
        "Nelson's kid: Tough exterior but secretly sensitive (breaking the cycle?)",
        "Ralph doesn't have kids - but talks about his cat like it's his kid",
        "Creates warm nostalgic bonding moments",
        "Workers see themselves in their children",
        "Occasional 'I hope he doesn't make my mistakes' vulnerability",
        "EXAMPLES ARE INSPIRATION - generate fresh moments"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "character_data.py"
      ],
      "passes": false
    },
    {
      "id": "SG-044",
      "category": "Soul & Guardrails",
      "title": "Family Interruption Excuses",
      "description": "When workers need to leave, family is the authentic reason. Wife calling, kid's recital, picking up from practice, parent's doctor appointment. Real life pulls them away, just like real workers.",
      "acceptance_criteria": [
        "Exit reasons draw from family database",
        "EXAMPLES ONLY: 'Gotta grab Jaden from soccer practice'",
        "EXAMPLES ONLY: 'Mom's at the doctor, said I'd pick her up'",
        "EXAMPLES ONLY: 'Wife's been texting, dinner's getting cold'",
        "Matches the worker's established family profile",
        "Feels authentic, not convenient plot device",
        "Other workers acknowledge ('Tell Sara hi!')",
        "NEVER verbatim - always fresh, profile-consistent excuses"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "BC-001",
      "category": "Broadcast Safety",
      "title": "Sanitization Layer Between Claude and Groq",
      "description": "Create a sanitization layer that strips sensitive information from Claude Code output BEFORE it reaches Groq for narration. Groq should never see passwords, API keys, IPs, or secrets.",
      "acceptance_criteria": [
        "Sanitizer sits between Claude output and Groq input",
        "Strips: API keys (sk-, ghp_, AKIA patterns)",
        "Strips: IP addresses (regex for x.x.x.x)",
        "Strips: Passwords and tokens",
        "Strips: Email addresses",
        "Strips: Database connection strings",
        "Replaces with generic: [credentials], [server], [key]",
        "Groq receives only sanitized summaries",
        "Audit log of what was stripped (for debugging, not display)"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "sanitizer.py"
      ],
      "passes": true
    },
    {
      "id": "BC-002",
      "category": "Broadcast Safety",
      "title": "Output Filter Before Telegram Send",
      "description": "Belt-and-suspenders: Final regex scan of ALL messages before they go to Telegram. Catches anything that slipped through sanitization.",
      "acceptance_criteria": [
        "Every message passes through filter before send",
        "Regex patterns for common secret formats",
        "Blocks message if suspicious pattern found",
        "Logs blocked attempts for review",
        "Falls back to generic message if block triggered",
        "Never lets a potential secret reach Telegram"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": true
    },
    {
      "id": "BC-003",
      "category": "Broadcast Safety",
      "title": "Regex Patterns for Common Secrets",
      "description": "Comprehensive regex pattern library for detecting secrets: API keys, tokens, passwords, IPs, connection strings, SSH keys, etc.",
      "acceptance_criteria": [
        "Pattern for API keys: sk-, ghp_, AKIA, etc.",
        "Pattern for IP addresses: IPv4 and IPv6",
        "Pattern for JWT tokens",
        "Pattern for base64-encoded secrets",
        "Pattern for connection strings (postgres://, mysql://, mongodb://)",
        "Pattern for SSH private keys",
        "Pattern for long alphanumeric strings (likely tokens)",
        "Easily extensible pattern list",
        "Unit tests for each pattern"
      ],
      "files_likely_modified": [
        "sanitizer.py",
        "patterns.py"
      ],
      "passes": true
    },
    {
      "id": "BC-004",
      "category": "Broadcast Safety",
      "title": ".env Key Name Detection",
      "description": "Read the project's .env file and automatically detect those specific key names/values to filter. Project-specific protection.",
      "acceptance_criteria": [
        "Parse .env file at startup",
        "Extract all key names and values",
        "Add values to filter list",
        "Add key names to filter list (TELEGRAM_BOT_TOKEN, etc.)",
        "Works even if .env format varies",
        "Refreshes if .env changes",
        "Never expose .env contents to Groq"
      ],
      "files_likely_modified": [
        "sanitizer.py",
        "config.py"
      ],
      "passes": true
    },
    {
      "id": "BC-005",
      "category": "Broadcast Safety",
      "title": "Audit Logging for Filtered Content",
      "description": "Log what was filtered (for debugging) but never display it. Admin can review what was caught.",
      "acceptance_criteria": [
        "Log each filtered item with timestamp",
        "Log what pattern matched",
        "Log original context (what message it was in)",
        "Logs stored securely, never sent to Telegram",
        "Admin command to view recent filters",
        "Auto-rotate logs to prevent bloat"
      ],
      "files_likely_modified": [
        "sanitizer.py",
        "logging_config.py"
      ],
      "passes": false
    },
    {
      "id": "BC-006",
      "category": "Broadcast Safety",
      "title": "Broadcast-Safe Flag",
      "description": "Command line flag or config option to enable extra-strict broadcast mode. When enabled, maximum filtering and a review delay.",
      "acceptance_criteria": [
        "--broadcast-safe flag on startup",
        "Or BROADCAST_SAFE=true in .env",
        "When enabled: stricter pattern matching",
        "When enabled: optional 5-second delay before send (human review buffer)",
        "When enabled: more aggressive generic replacements",
        "Visual indicator that broadcast mode is active"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "config.py"
      ],
      "passes": false
    },
    {
      "id": "MU-001",
      "category": "Multi-User Access",
      "title": "User Tier System",
      "description": "Implement tiered user access: Tier 1 (Mr. Worms/Owner), Tier 2 (Power Users), Tier 3 (Chatters), Tier 4 (Viewers).",
      "acceptance_criteria": [
        "Database/storage for user tiers",
        "Tier 1: Full control, admin powers, directs the build",
        "Tier 2: Can control bot actions, authenticated via /password",
        "Tier 3: Can chat with Ralph, but input doesn't affect build",
        "Tier 4: View only, no interaction",
        "Default tier for new users (configurable)",
        "Tier persists across sessions"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "user_manager.py"
      ],
      "passes": false
    },
    {
      "id": "MU-002",
      "category": "Multi-User Access",
      "title": "/password Authentication for Power Users",
      "description": "Allow users to elevate to Power User tier by entering a password. Hidden from chat.",
      "acceptance_criteria": [
        "/password [secret] command",
        "Password configured by admin in .env",
        "Successful auth elevates to Tier 2",
        "Auth message deleted immediately (hidden)",
        "Confirmation sent as private message or ephemeral",
        "Failed attempts logged but not announced",
        "Optional: time-limited elevation"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "user_manager.py"
      ],
      "passes": false
    },
    {
      "id": "MU-003",
      "category": "Multi-User Access",
      "title": "Character Assignment for Non-Owner Users",
      "description": "Assign random Springfield resident characters to non-owner users. Their messages get translated into that character's voice.",
      "acceptance_criteria": [
        "Pool of available characters (Springfield residents)",
        "New user gets random character assigned",
        "Character persists for that user",
        "User's messages translated into character's voice",
        "Character name shown instead of username",
        "Admin can reassign characters",
        "Characters feel distinct (different speech patterns)"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "character_manager.py"
      ],
      "passes": false
    },
    {
      "id": "MU-004",
      "category": "Multi-User Access",
      "title": "Tier-Based Input Restrictions",
      "description": "Enforce what each tier can do. Tier 3 can chat but not direct build. Tier 4 can only view.",
      "acceptance_criteria": [
        "Tier 1: All actions allowed",
        "Tier 2: Control actions, limited admin",
        "Tier 3: Chat with Ralph, no build directives processed",
        "Tier 4: Messages ignored or blocked politely",
        "Clear feedback when action blocked",
        "Upgrade path explained (how to get higher tier)"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "user_manager.py"
      ],
      "passes": false
    },
    {
      "id": "VO-001",
      "category": "Voice-Only Input",
      "title": "Admin Text Input - Translated to Scene",
      "description": "UPDATED: Admin/owner CAN type text. Text gets translated into theatrical scene just like voice. Non-admins still voice-only or limited based on tier.",
      "acceptance_criteria": [
        "Mr. Worms (Tier 1) can type OR use voice",
        "Power Users (Tier 2) can type OR use voice",
        "Text input translated same as voice would be",
        "Angry text \u2192 *slams message on desk*",
        "Questions \u2192 *leans in, curious look*",
        "Commands \u2192 *points at the board*",
        "Original text message can be deleted after translation",
        "Tier 3/4 may be voice-only (configurable)",
        "Comprehensive input: voice, text, files all work for admin"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "VO-005",
      "category": "Voice-Only Input",
      "title": "Document/File Attachment Translation",
      "description": "When admin drops files, documents, images - translate into scene action. 'Mr. Worms slaps a folder on the desk.' Documents become physical objects in the scene.",
      "acceptance_criteria": [
        "Detect file/document attachments",
        "Translate to scene: '*Mr. Worms drops a thick folder on Ralph's desk*'",
        "Different file types = different objects:",
        "  - PDFs/docs \u2192 folders, papers, binders",
        "  - Images \u2192 photos, printouts, screenshots",
        "  - Zip files \u2192 boxes, packages",
        "  - Code files \u2192 technical specs, blueprints",
        "Vary the actions: drops, slaps, slides, throws gently",
        "File content still processed normally behind scenes",
        "Scene description always fresh, never canned"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "translation_engine.py"
      ],
      "passes": false
    },
    {
      "id": "VO-006",
      "category": "Voice-Only Input",
      "title": "Multi-Input Session Support",
      "description": "Admin can combine inputs in one session: voice + text + files. All get woven into coherent scene.",
      "acceptance_criteria": [
        "Handle voice message followed by text clarification",
        "Handle text followed by file attachment",
        "All inputs combined into flowing narrative",
        "Scene stays coherent across input types",
        "Example: Voice 'here's the code' + zip file \u2192 '*Mr. Worms sets down his coffee and slides a heavy box across the table*'",
        "Timestamps/ordering preserved",
        "Natural flow like real conversation"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "session_manager.py"
      ],
      "passes": false
    },
    {
      "id": "VO-007",
      "category": "Voice-Only Input",
      "title": "Context Paste Support",
      "description": "Admin can paste in large context blocks (code, logs, docs). Gets summarized and presented as 'documentation' in scene.",
      "acceptance_criteria": [
        "Detect large text pastes (>500 chars)",
        "Summarize for scene presentation",
        "Scene: '*Mr. Worms hands over a stack of technical documentation*'",
        "Full content passed to workers behind scenes",
        "Only summary/description shown in chat",
        "Preserves immersion while allowing rich context",
        "Workers can reference 'the documents Mr. Worms provided'"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "context_handler.py"
      ],
      "passes": false
    },
    {
      "id": "VO-002",
      "category": "Voice-Only Input",
      "title": "Allow Only Voice Messages",
      "description": "Process voice messages as the primary input method. Transcribe and handle.",
      "acceptance_criteria": [
        "Voice messages accepted and processed",
        "Transcription via Whisper (local or Groq)",
        "Transcribed text used for intent detection",
        "Original voice message can be deleted after processing",
        "Handle various audio formats Telegram supports"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "voice_handler.py"
      ],
      "passes": false
    },
    {
      "id": "VO-003",
      "category": "Voice-Only Input",
      "title": "Keep Button/Inline Actions Working",
      "description": "While text is blocked, inline buttons and callback actions still work. Users can tap buttons.",
      "acceptance_criteria": [
        "Inline button callbacks processed normally",
        "Button taps don't require voice",
        "Menu navigation works",
        "Quick actions (approve, cancel, etc.) work",
        "Consistent with voice-only philosophy (buttons are actions, not text)"
      ],
      "files_likely_modified": [
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "VO-004",
      "category": "Voice-Only Input",
      "title": "Voice-to-Intent Pipeline",
      "description": "Full pipeline from voice message to understood intent: transcribe, analyze tone, extract directive.",
      "acceptance_criteria": [
        "Voice \u2192 Whisper transcription",
        "Transcription \u2192 Tone analysis (angry, happy, questioning)",
        "Transcription \u2192 Intent extraction (what does user want)",
        "Both tone and intent passed to translation layer",
        "Handle unclear audio gracefully",
        "Ask for clarification if intent unclear"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "voice_handler.py",
        "intent_analyzer.py"
      ],
      "passes": false
    },
    {
      "id": "TL-001",
      "category": "Translation Layer",
      "title": "Tone Analysis from Voice",
      "description": "Analyze the emotional tone of voice messages: angry, frustrated, happy, questioning, urgent, calm.",
      "acceptance_criteria": [
        "Detect anger/frustration (from transcription + audio features if possible)",
        "Detect happiness/approval",
        "Detect questioning/curiosity",
        "Detect urgency",
        "Detect calm/routine",
        "Tone informs how scene is described",
        "Works with transcription text as fallback"
      ],
      "files_likely_modified": [
        "tone_analyzer.py",
        "voice_handler.py"
      ],
      "passes": false
    },
    {
      "id": "TL-002",
      "category": "Translation Layer",
      "title": "Character Translation Engine",
      "description": "The core magic: translate user speech into Mr. Worms character actions and dialogue. User says X, chat shows theatrical version.",
      "acceptance_criteria": [
        "Take transcribed speech + tone",
        "Generate in-character scene description",
        "Mr. Worms actions described (storms in, nods, sighs)",
        "Dialogue rewritten in Mr. Worms voice",
        "Maintains meaning while changing presentation",
        "Never shows original words",
        "Groq prompt optimized for this translation"
      ],
      "files_likely_modified": [
        "translation_engine.py",
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "TL-003",
      "category": "Translation Layer",
      "title": "Scene-Contextualized Output Generation",
      "description": "All output happens within the established scene. Actions, dialogue, atmosphere - everything stays in the fiction.",
      "acceptance_criteria": [
        "Output includes scene actions (*Mr. Worms enters*)",
        "Output includes dialogue in quotes",
        "Output references current scene (weather, time, mood)",
        "Responses feel like reading a screenplay",
        "Environment reacts appropriately",
        "Consistent atmosphere throughout session"
      ],
      "files_likely_modified": [
        "translation_engine.py",
        "scene_manager.py"
      ],
      "passes": false
    },
    {
      "id": "TL-004",
      "category": "Translation Layer",
      "title": "Original Message Deletion",
      "description": "Delete the user's original voice message after processing. Only the translated version remains in chat.",
      "acceptance_criteria": [
        "Original voice message deleted after transcription",
        "Deletion happens quickly (before users notice)",
        "Only translated scene version visible",
        "Works within Telegram API limits",
        "Handle deletion failures gracefully",
        "Admin option to disable deletion (for debugging)"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "message_manager.py"
      ],
      "passes": false
    },
    {
      "id": "TL-005",
      "category": "Translation Layer",
      "title": "Swear Word to Action Translation",
      "description": "Swear words never appear in chat. They're translated into character actions that convey the same emotion.",
      "acceptance_criteria": [
        "Detect swear words in transcription",
        "Replace with action: 'What the fuck' \u2192 *jaw tightens*",
        "Convey intensity through description, not words",
        "Keep it broadcast-safe (no swears ever)",
        "Maintain the emotional weight",
        "Examples: slams desk, growls, eye twitches"
      ],
      "files_likely_modified": [
        "translation_engine.py",
        "content_filter.py"
      ],
      "passes": false
    },
    {
      "id": "TL-006",
      "category": "Translation Layer",
      "title": "Preserve Actual Directive While Translating Display",
      "description": "The translation is for DISPLAY only. The actual directive still gets processed. 'Fix this now' \u2192 Ralph knows to prioritize, even though chat shows theatrical version.",
      "acceptance_criteria": [
        "Extract intent/directive before translation",
        "Pass directive to action handler",
        "Translation only affects display",
        "Ralph responds to actual meaning, not just scene",
        "Urgent commands still processed urgently",
        "Questions still get answered"
      ],
      "files_likely_modified": [
        "translation_engine.py",
        "command_handler.py"
      ],
      "passes": false
    },
    {
      "id": "SS-001",
      "category": "Scene Setting",
      "title": "Opening Scene Generation",
      "description": "Every session opens with atmospheric scene-setting. Weather, time, office mood, workers arriving.",
      "acceptance_criteria": [
        "Generate opening scene on session start",
        "Include weather (real or generated)",
        "Include time of day",
        "Include office atmosphere",
        "Workers trickle in naturally",
        "Sets the stage for the session",
        "Unique each time, never canned"
      ],
      "files_likely_modified": [
        "scene_manager.py",
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SS-002",
      "category": "Scene Setting",
      "title": "Weather Integration (Optional)",
      "description": "If user location is known (from setup), use real weather. Otherwise, generate atmospheric weather.",
      "acceptance_criteria": [
        "Check if location configured",
        "If yes: fetch real weather (OpenWeather API or similar)",
        "If no: generate fitting weather",
        "Weather affects scene (rainy = cozy office, sunny = bright mood)",
        "Don't ask for location mid-session (breaks immersion)",
        "Weather can change during long sessions"
      ],
      "files_likely_modified": [
        "weather_service.py",
        "scene_manager.py"
      ],
      "passes": false
    },
    {
      "id": "SS-003",
      "category": "Scene Setting",
      "title": "Time-of-Day Awareness",
      "description": "Scene reflects actual time of day. Morning coffee, lunch breaks, late night crunch - all feel authentic.",
      "acceptance_criteria": [
        "Detect user's local time (from system or config)",
        "Morning: workers arriving, coffee, slow start",
        "Midday: productive energy, maybe lunch mentions",
        "Afternoon: settling in, steady work",
        "Evening: wrapping up, tired but focused",
        "Late night: skeleton crew, dedication",
        "Time references feel natural"
      ],
      "files_likely_modified": [
        "scene_manager.py",
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "SS-004",
      "category": "Scene Setting",
      "title": "Atmosphere Matching to Task",
      "description": "Scene atmosphere matches the work ahead. Bug hunt = tense, new feature = excited, routine = calm.",
      "acceptance_criteria": [
        "Analyze task type from user directive",
        "Bug/urgent: tense, focused atmosphere",
        "New feature: excited, creative energy",
        "Routine: calm, steady, comfortable",
        "Crunch time: intense, driven",
        "Atmosphere influences word choice and actions"
      ],
      "files_likely_modified": [
        "scene_manager.py",
        "atmosphere_detector.py"
      ],
      "passes": false
    },
    {
      "id": "SS-005",
      "category": "Scene Setting",
      "title": "Maintain Scene Throughout Session",
      "description": "Scene consistency across all messages. Weather doesn't randomly change, time progresses naturally, callbacks to earlier moments.",
      "acceptance_criteria": [
        "Track current scene state",
        "Weather consistent (unless explicitly progressing)",
        "Time progresses naturally over session",
        "Can reference earlier scene moments",
        "Environment reacts (lights dim for late night)",
        "Scene elements persist (coffee from earlier, etc.)"
      ],
      "files_likely_modified": [
        "scene_manager.py",
        "session_state.py"
      ],
      "passes": false
    },
    {
      "id": "AC-001",
      "category": "Admin Commands",
      "title": "Admin Command Trigger Phrase Detection",
      "description": "Detect 'admin command' or similar trigger at start of voice message. These are processed but never shown in chat.",
      "acceptance_criteria": [
        "Detect 'admin command:' prefix in transcription",
        "Also detect variations: 'admin:', 'hey admin', etc.",
        "Flag message as admin command",
        "Route to admin handler, not normal flow",
        "Never show admin commands in chat",
        "Only Mr. Worms (Tier 1) can use admin commands"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "voice_handler.py"
      ],
      "passes": false
    },
    {
      "id": "AC-002",
      "category": "Admin Commands",
      "title": "Transcribe but Don't Show in Chat (Hidden Execution)",
      "description": "Admin commands are transcribed and executed but NEVER appear in the chat. Completely invisible to others.",
      "acceptance_criteria": [
        "Transcribe admin voice message",
        "Parse the command",
        "Execute the command",
        "Delete the original voice message",
        "Do NOT post any response to group chat",
        "Send confirmation only to admin (private or ephemeral)"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "AC-003",
      "category": "Admin Commands",
      "title": "Rate Limiting - Cooldown Periods Per User",
      "description": "Admin can set cooldown periods for users. 'admin command: set cooldown 5 minutes' - user can only message once per 5 minutes.",
      "acceptance_criteria": [
        "Parse 'set cooldown X minutes/seconds' command",
        "Apply to specific user or all non-admins",
        "Track last message time per user",
        "Block messages during cooldown",
        "Friendly in-character response to blocked user",
        "Cooldown persists until changed"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "rate_limiter.py"
      ],
      "passes": false
    },
    {
      "id": "AC-004",
      "category": "Admin Commands",
      "title": "Configurable Cooldown Values by Admin",
      "description": "Admin can adjust cooldown values on the fly via voice commands.",
      "acceptance_criteria": [
        "'admin command: cooldown off' - disable cooldown",
        "'admin command: cooldown 1 minute' - 1 minute cooldown",
        "'admin command: cooldown 10 minutes for @user' - per-user",
        "Changes take effect immediately",
        "Confirm change to admin (privately)"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "rate_limiter.py"
      ],
      "passes": false
    },
    {
      "id": "AC-005",
      "category": "Admin Commands",
      "title": "Banned Subjects/Topics List Management",
      "description": "Admin can ban certain topics from discussion. Messages mentioning banned topics are blocked.",
      "acceptance_criteria": [
        "'admin command: ban topic [topic]' - add to ban list",
        "'admin command: unban topic [topic]' - remove from list",
        "'admin command: list banned topics' - show current list",
        "Messages containing banned topics blocked",
        "In-character deflection when topic blocked",
        "Topic matching is fuzzy (catches variations)"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "content_filter.py"
      ],
      "passes": false
    },
    {
      "id": "AC-006",
      "category": "Admin Commands",
      "title": "User Mute/Unmute Commands",
      "description": "Admin can mute specific users. Muted users' messages are ignored entirely.",
      "acceptance_criteria": [
        "'admin command: mute @user' - mute user",
        "'admin command: unmute @user' - unmute user",
        "'admin command: list muted' - show muted users",
        "Muted user's messages completely ignored",
        "No response or acknowledgment to muted user",
        "Mute persists until unmuted"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "user_manager.py"
      ],
      "passes": false
    },
    {
      "id": "AC-007",
      "category": "Admin Commands",
      "title": "Tier Changes via Voice",
      "description": "Admin can promote or demote users via voice commands.",
      "acceptance_criteria": [
        "'admin command: promote @user to power user' - elevate to Tier 2",
        "'admin command: demote @user to viewer' - drop to Tier 4",
        "'admin command: make @user chatter' - set to Tier 3",
        "Changes take effect immediately",
        "User notified of tier change (in-character)",
        "Cannot demote self or other Tier 1"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "user_manager.py"
      ],
      "passes": false
    },
    {
      "id": "AC-008",
      "category": "Admin Commands",
      "title": "Silent Execution Confirmation",
      "description": "After admin command executes, send private confirmation ONLY to admin. Others see nothing.",
      "acceptance_criteria": [
        "Admin command executes",
        "Send private message to admin with result",
        "Or ephemeral message only admin sees",
        "Or subtle visual indicator (emoji reaction)",
        "No public acknowledgment of admin action",
        "Maintains illusion that nothing happened"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "ralph_bot.py"
      ],
      "passes": false
    },
    {
      "id": "FB-001",
      "category": "Feedback Loop",
      "title": "Feedback Command Handler",
      "description": "Implement /feedback command in Telegram bot. Accepts text, voice, or screenshots. Routes to collection pipeline.",
      "acceptance_criteria": [
        "/feedback command registered in bot",
        "Accepts text description of bug/feature",
        "Accepts voice messages (transcribed)",
        "Accepts screenshots with context",
        "Stores feedback with user_id, tier, timestamp",
        "Confirms receipt to user in-character"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "feedback_collector.py"
      ],
      "passes": true
    },
    {
      "id": "FB-002",
      "category": "Feedback Loop",
      "title": "Subscription Gate for Feedback",
      "description": "Check if user is Builder ($10/mo) or Priority ($20/mo) before accepting feedback. Viewers get upgrade prompt.",
      "acceptance_criteria": [
        "Check user subscription tier before accepting feedback",
        "Viewer tier: Show upgrade prompt in-character",
        "Builder tier: Accept feedback with weight 1.0",
        "Priority tier: Accept feedback with weight 2.0",
        "Expired subscriptions blocked with renewal prompt",
        "Ralph says something like 'Ooh feedback! But my boss says only Builders can tell us what to build'"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "subscription_manager.py"
      ],
      "passes": true
    },
    {
      "id": "FB-003",
      "category": "Feedback Loop",
      "title": "Feedback Types Classification",
      "description": "Support multiple feedback types: bug_report, feature_request, enhancement, ux_issue, performance, other.",
      "acceptance_criteria": [
        "Inline buttons to select feedback type",
        "Each type has appropriate fields",
        "Bug: steps to reproduce, expected vs actual",
        "Feature: description, use case",
        "Enhancement: what exists, what to improve",
        "Type stored with feedback for routing"
      ],
      "files_likely_modified": [
        "feedback_collector.py"
      ],
      "passes": true
    },
    {
      "id": "RL-001",
      "category": "Rate Limiting",
      "title": "IP Rate Limiter for Feedback",
      "description": "Limit feedback submissions per IP address. Default: 5 per hour, 20 per day. Prevents gaming the system.",
      "acceptance_criteria": [
        "Track submissions per IP address",
        "Limit: 5 submissions per hour per IP",
        "Limit: 20 submissions per day per IP",
        "Priority tier gets 2x limits",
        "Show friendly rate limit message when exceeded",
        "Use Redis for cross-instance consistency"
      ],
      "files_likely_modified": [
        "rate_limiter.py",
        "feedback_collector.py"
      ],
      "passes": true
    },
    {
      "id": "RL-002",
      "category": "Rate Limiting",
      "title": "User Rate Limiter for Feedback",
      "description": "Limit feedback per user account (separate from IP). Priority users get 2x limits.",
      "acceptance_criteria": [
        "Track submissions per user_id",
        "Builder: 10/hour, 50/day",
        "Priority: 20/hour, 100/day",
        "Separate from IP limits (both apply)",
        "Graceful messaging when limited"
      ],
      "files_likely_modified": [
        "rate_limiter.py"
      ],
      "passes": true
    },
    {
      "id": "RL-003",
      "category": "Rate Limiting",
      "title": "Burst Detection",
      "description": "Detect and block rapid-fire submissions (>3 in 1 minute). Flag account for review.",
      "acceptance_criteria": [
        "Detect >3 submissions in 60 seconds",
        "Block further submissions for 10 minutes",
        "Flag account for admin review",
        "3+ burst events = require manual approval",
        "Log all burst events"
      ],
      "files_likely_modified": [
        "rate_limiter.py"
      ],
      "passes": true
    },
    {
      "id": "QS-001",
      "category": "Quality Scoring",
      "title": "Quality Score Algorithm",
      "description": "Calculate quality score (0-100) for each feedback. Factors: clarity, actionability, specificity, reproducibility.",
      "acceptance_criteria": [
        "Clarity (0-25): Is it clearly written?",
        "Actionability (0-25): Can we do something with this?",
        "Specificity (0-25): Does it include details, examples?",
        "Reproducibility (0-25): Can we reproduce/understand scope?",
        "Final score = sum of all factors",
        "Score stored with feedback item"
      ],
      "files_likely_modified": [
        "feedback_scorer.py"
      ],
      "passes": true
    },
    {
      "id": "QS-002",
      "category": "Quality Scoring",
      "title": "AI Quality Assessment",
      "description": "Use LLM to assess feedback quality. Extract structured data: problem, expected, actual, steps.",
      "acceptance_criteria": [
        "Send feedback to Groq for analysis",
        "Extract: problem statement, expected behavior, actual behavior",
        "Extract: steps to reproduce (for bugs)",
        "Extract: use case, scope (for features)",
        "Calculate quality score from structured data",
        "Low-quality feedback gets clarifying questions"
      ],
      "files_likely_modified": [
        "feedback_scorer.py"
      ],
      "passes": true
    },
    {
      "id": "QS-003",
      "category": "Quality Scoring",
      "title": "User Quality Score Tracking",
      "description": "Track quality score per user over time. Users with consistently high-quality feedback get boosted priority.",
      "acceptance_criteria": [
        "Track average quality score per user",
        "Users with avg > 70: +20% priority boost",
        "Users with avg > 85: +50% priority boost",
        "Users with avg < 40: flag for review",
        "Quality score visible to user on /mystatus"
      ],
      "files_likely_modified": [
        "feedback_scorer.py",
        "user_manager.py"
      ],
      "passes": true
    },
    {
      "id": "SP-001",
      "category": "Spam Detection",
      "title": "Spam Pattern Detection",
      "description": "Detect spam patterns: gibberish, repeated text, promotional content, off-topic submissions.",
      "acceptance_criteria": [
        "Detect gibberish (entropy analysis)",
        "Detect repeated submissions (same text)",
        "Detect promotional content (URLs, ads)",
        "Detect off-topic (not about Ralph Mode)",
        "Auto-reject with reason",
        "Log for admin review"
      ],
      "files_likely_modified": [
        "feedback_screener.py"
      ],
      "passes": true
    },
    {
      "id": "SP-002",
      "category": "Spam Detection",
      "title": "Abuse Detection",
      "description": "Detect abusive content: profanity, threats, harassment. Auto-flag for review, don't process.",
      "acceptance_criteria": [
        "Detect profanity and slurs",
        "Detect threats and harassment",
        "Detect personal attacks",
        "Auto-flag, don't process",
        "Notify admin of flagged content",
        "User warned (first time) or flagged (repeat)"
      ],
      "files_likely_modified": [
        "feedback_screener.py"
      ],
      "passes": true
    },
    {
      "id": "DD-001",
      "category": "Duplicate Detection",
      "title": "Semantic Duplicate Detection",
      "description": "Use embeddings to find semantically similar existing feedback. Threshold: 0.85 cosine similarity.",
      "acceptance_criteria": [
        "Generate embedding for new feedback",
        "Compare against all existing feedback embeddings",
        "Threshold: 0.85 similarity = duplicate",
        "Use vector database for fast search",
        "Works across feedback types"
      ],
      "files_likely_modified": [
        "duplicate_detector.py"
      ],
      "passes": true
    },
    {
      "id": "DD-002",
      "category": "Duplicate Detection",
      "title": "Duplicate Merging and Upvoting",
      "description": "When duplicate found, merge into existing item. Upvote count increases. Notify user.",
      "acceptance_criteria": [
        "Merge duplicate into original item",
        "Increment upvote count on original",
        "Notify user: 'Your feedback was added to an existing item'",
        "Show link to original item",
        "Each upvote increases impact score by 0.5"
      ],
      "files_likely_modified": [
        "duplicate_detector.py",
        "feedback_queue.py"
      ],
      "passes": true
    },
    {
      "id": "DD-003",
      "category": "Duplicate Detection",
      "title": "Already Fixed Detection",
      "description": "Check if feedback matches something already fixed in recent versions. Notify user and close.",
      "acceptance_criteria": [
        "Check against changelog of last 5 versions",
        "If similar to fixed item, notify user",
        "Show version where it was fixed",
        "Auto-close feedback item",
        "Suggest user upgrade if on old version"
      ],
      "files_likely_modified": [
        "duplicate_detector.py",
        "version_manager.py"
      ],
      "passes": true
    },
    {
      "id": "PR-001",
      "category": "Priority Scoring",
      "title": "Priority Score Algorithm",
      "description": "Calculate priority: (Impact x Frequency x Urgency x Quality x UserWeight) / Complexity",
      "acceptance_criteria": [
        "Impact (1-10): How many users affected?",
        "Frequency (1-10): How often does this occur?",
        "Urgency (1-10): Is this blocking critical flows?",
        "Quality (0.3-1.0): Feedback quality score",
        "UserWeight: Builder=1.0, Priority=2.0",
        "Complexity (1-10): Estimated effort to fix",
        "Final = (impact * frequency * urgency * quality * weight) / complexity"
      ],
      "files_likely_modified": [
        "feedback_scorer.py"
      ],
      "passes": true
    },
    {
      "id": "PR-002",
      "category": "Priority Scoring",
      "title": "Priority Tiers",
      "description": "Categorize by priority score: HIGH (>7), MEDIUM (4-7), LOW (<4)",
      "acceptance_criteria": [
        "Score > 7: HIGH - build next",
        "Score 4-7: MEDIUM - queued",
        "Score < 4: LOW - backlog",
        "Priority tier visible on queue dashboard",
        "High priority items picked first by Ralph"
      ],
      "files_likely_modified": [
        "feedback_scorer.py"
      ],
      "passes": true
    },
    {
      "id": "FQ-001",
      "category": "Feedback Queue",
      "title": "Feedback Queue Database",
      "description": "PostgreSQL table for feedback queue. Track status from submission to deployment.",
      "acceptance_criteria": [
        "Table: feedback_items",
        "Fields: id, user_id, type, content, quality_score, priority_score, status",
        "Fields: created_at, updated_at, assigned_at, completed_at",
        "Indexes for fast queries",
        "Status tracking through lifecycle"
      ],
      "files_likely_modified": [
        "feedback_queue.py",
        "database.py"
      ],
      "passes": true
    },
    {
      "id": "FQ-002",
      "category": "Feedback Queue",
      "title": "Queue Status States",
      "description": "Track feedback through: pending, screening, scored, queued, in_progress, testing, deployed, rejected.",
      "acceptance_criteria": [
        "pending: Just submitted",
        "screening: Being checked for spam/quality",
        "scored: Quality and priority calculated",
        "queued: In build queue waiting for Ralph",
        "in_progress: Ralph is building",
        "testing: Tests running",
        "deployed: Live in production",
        "rejected: Spam, duplicate, wont_fix"
      ],
      "files_likely_modified": [
        "feedback_queue.py"
      ],
      "passes": true
    },
    {
      "id": "FQ-003",
      "category": "Feedback Queue",
      "title": "User Feedback Status Check",
      "description": "Let users check status of their submitted feedback via /mystatus command.",
      "acceptance_criteria": [
        "/mystatus shows all user's feedback items",
        "Each item shows: title, status, position in queue",
        "Estimated time to build (if queued)",
        "Link to view details",
        "In-character response from Ralph"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "feedback_queue.py"
      ],
      "passes": true
    },
    {
      "id": "BO-001",
      "category": "Build Orchestrator",
      "title": "Build Orchestrator Service",
      "description": "Service that monitors queue and spawns Ralph instances to build high-priority items.",
      "acceptance_criteria": [
        "Runs as background service",
        "Polls queue for high-priority items",
        "Spawns Ralph with task context",
        "Monitors build progress",
        "Updates queue status in real-time",
        "Handles build completion/failure"
      ],
      "files_likely_modified": [
        "build_orchestrator.py"
      ],
      "passes": true
    },
    {
      "id": "BO-002",
      "category": "Build Orchestrator",
      "title": "Isolated Build Environment",
      "description": "Each build runs in isolated Docker container. Fresh clone of repo. No cross-contamination.",
      "acceptance_criteria": [
        "Docker container per build",
        "Fresh git clone of repo",
        "Branch: feedback/FB-XXX",
        "Isolated from other builds",
        "Cleanup after completion"
      ],
      "files_likely_modified": [
        "build_orchestrator.py",
        "Dockerfile.build"
      ],
      "passes": true
    },
    {
      "id": "BO-003",
      "category": "Build Orchestrator",
      "title": "Build Failure Handling",
      "description": "On failure: log details, deprioritize item (score * 0.5), notify admin if consecutive failures.",
      "acceptance_criteria": [
        "Capture build failure reason",
        "Log detailed failure info",
        "Reduce priority score by 50%",
        "Move to next queue item",
        "3+ consecutive failures: alert admin",
        "5+ consecutive: pause build loop"
      ],
      "files_likely_modified": [
        "build_orchestrator.py"
      ],
      "passes": true
    },
    {
      "id": "TS-001",
      "category": "Testing",
      "title": "Automated Test Suite Integration",
      "description": "Run full test suite after each build. Must pass 100% to proceed to deploy.",
      "acceptance_criteria": [
        "Run pytest/unittest after build",
        "All tests must pass",
        "Coverage must not decrease",
        "Failed tests = failed build",
        "Test results stored with build record"
      ],
      "files_likely_modified": [
        "build_orchestrator.py",
        "test_runner.py"
      ],
      "passes": true
    },
    {
      "id": "DP-001",
      "category": "Deployment",
      "title": "Staging Deployment",
      "description": "Auto-deploy passing builds to staging environment. Run integration tests.",
      "acceptance_criteria": [
        "Deploy to staging on test pass",
        "Run integration tests on staging",
        "Health check endpoints",
        "Staging URL accessible for verification",
        "Auto-promote to canary if healthy"
      ],
      "files_likely_modified": [
        "deploy_manager.py"
      ],
      "passes": true
    },
    {
      "id": "DP-002",
      "category": "Deployment",
      "title": "Canary Deployment",
      "description": "Roll out to 5% of users first. Monitor error rates for 30 minutes.",
      "acceptance_criteria": [
        "Deploy to 5% of traffic",
        "Monitor error rates vs baseline",
        "Monitor latency vs baseline",
        "30 minute observation period",
        "Auto-promote if healthy",
        "Auto-rollback if error rate > 2x baseline"
      ],
      "files_likely_modified": [
        "deploy_manager.py"
      ],
      "passes": true
    },
    {
      "id": "DP-003",
      "category": "Deployment",
      "title": "Auto Rollback",
      "description": "If error rate > 2x baseline after deploy, auto-rollback to previous version.",
      "acceptance_criteria": [
        "Monitor error rates post-deploy",
        "Threshold: 2x baseline error rate",
        "Auto-rollback if threshold exceeded",
        "Notify admin of rollback",
        "Mark feedback item as failed",
        "Keep previous version running"
      ],
      "files_likely_modified": [
        "deploy_manager.py",
        "monitoring.py"
      ],
      "passes": true
    },
    {
      "id": "VM-001",
      "category": "Version Management",
      "title": "Semantic Version Numbering",
      "description": "Semantic versioning: MAJOR.MINOR.PATCH. Auto-increment based on change type.",
      "acceptance_criteria": [
        "MAJOR: Breaking changes",
        "MINOR: New features (feature_request)",
        "PATCH: Bug fixes (bug_report, enhancement)",
        "Auto-increment on deploy",
        "Version stored in VERSION file",
        "Git tags created for each version"
      ],
      "files_likely_modified": [
        "version_manager.py"
      ],
      "passes": true
    },
    {
      "id": "VM-002",
      "category": "Version Management",
      "title": "Version History and Changelog",
      "description": "Track all versions with release notes. Auto-generate changelog from feedback items addressed.",
      "acceptance_criteria": [
        "Store: version, date, feedback items addressed",
        "Auto-generate changelog from feedback titles",
        "Human-readable format",
        "Available via API",
        "Displayed on website"
      ],
      "files_likely_modified": [
        "version_manager.py",
        "changelog_generator.py"
      ],
      "passes": true
    },
    {
      "id": "VM-003",
      "category": "Version Management",
      "title": "Version Selection for Users",
      "description": "Users can choose which version to run: stable, beta, alpha, nightly.",
      "acceptance_criteria": [
        "/version command shows current version",
        "/version stable - switch to stable",
        "/version beta - switch to beta",
        "/version alpha - switch to alpha (Priority only)",
        "Version preference stored per user/group"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "version_manager.py",
        "database.py",
        "migrate_vm003.py"
      ],
      "passes": true
    },
    {
      "id": "WB-001",
      "category": "Website Integration",
      "title": "Website Version Display",
      "description": "Show current stable, beta, alpha versions on website with download links.",
      "acceptance_criteria": [
        "API endpoint: /api/versions",
        "Returns: stable, beta, alpha versions",
        "Each has: number, date, changelog link",
        "Download links for each version",
        "Auto-updates on new release"
      ],
      "files_likely_modified": [
        "api_server.py",
        "version_manager.py"
      ],
      "passes": true
    },
    {
      "id": "WB-002",
      "category": "Website Integration",
      "title": "Live Build Stream",
      "description": "Stream Ralph's terminal output to website in real-time. Show what's being built.",
      "acceptance_criteria": [
        "WebSocket endpoint for build stream",
        "Real-time terminal output",
        "Show current task being built",
        "Show progress (tests running, deploying, etc)",
        "Sanitize output (no secrets)"
      ],
      "files_likely_modified": [
        "build_orchestrator.py",
        "websocket_server.py"
      ],
      "passes": true
    },
    {
      "id": "WB-003",
      "category": "Website Integration",
      "title": "Public Build Status Dashboard",
      "description": "Public dashboard showing: items in queue, currently building, recently deployed.",
      "acceptance_criteria": [
        "Queue depth visible",
        "Current build task visible",
        "Recent deployments list",
        "Build success rate displayed",
        "Updates in real-time"
      ],
      "files_likely_modified": [
        "api_server.py"
      ],
      "passes": false
    },
    {
      "id": "NT-001",
      "category": "Notifications",
      "title": "Feedback Received Notification",
      "description": "Notify user when their feedback is received and scored. Show position in queue.",
      "acceptance_criteria": [
        "Telegram message after feedback processed",
        "Show quality score",
        "Show priority tier (HIGH/MEDIUM/LOW)",
        "Show position in queue",
        "In-character from Ralph"
      ],
      "files_likely_modified": [
        "notification_service.py"
      ],
      "passes": false
    },
    {
      "id": "NT-002",
      "category": "Notifications",
      "title": "Build Started Notification",
      "description": "Notify user when Ralph starts building their requested item.",
      "acceptance_criteria": [
        "Telegram message when build starts",
        "Show estimated completion time",
        "Link to watch live stream",
        "In-character from Ralph"
      ],
      "files_likely_modified": [
        "notification_service.py"
      ],
      "passes": false
    },
    {
      "id": "NT-003",
      "category": "Notifications",
      "title": "Deployed Notification",
      "description": "Notify user when their feedback is live. Include version number and changelog link.",
      "acceptance_criteria": [
        "Telegram message when deployed",
        "Show version number",
        "Link to changelog",
        "Thank user for feedback",
        "Ask for thumbs up/down satisfaction"
      ],
      "files_likely_modified": [
        "notification_service.py"
      ],
      "passes": false
    },
    {
      "id": "SF-001",
      "category": "Safeguards",
      "title": "Circuit Breaker",
      "description": "Pause build loop if 5+ consecutive failures. Alert admin. Require manual resume.",
      "acceptance_criteria": [
        "Track consecutive failure count",
        "5+ failures: pause loop",
        "Alert admin via Telegram/email",
        "Require /resume command to restart",
        "Log all failures for review"
      ],
      "files_likely_modified": [
        "build_orchestrator.py",
        "monitoring.py"
      ],
      "passes": false
    },
    {
      "id": "SF-002",
      "category": "Safeguards",
      "title": "Health Monitoring",
      "description": "Continuous health monitoring: API latency, error rates, queue depth, build success rate.",
      "acceptance_criteria": [
        "Monitor API response times",
        "Monitor error rates",
        "Monitor queue depth",
        "Monitor build success rate",
        "Alert on anomalies",
        "Dashboard for metrics"
      ],
      "files_likely_modified": [
        "monitoring.py"
      ],
      "passes": false
    },
    {
      "id": "SF-003",
      "category": "Safeguards",
      "title": "Admin Override Controls",
      "description": "Admin can: pause loop, force deploy, force rollback, prioritize item, reject item.",
      "acceptance_criteria": [
        "/admin pause - stop build loop",
        "/admin resume - restart build loop",
        "/admin deploy FB-XXX - force deploy",
        "/admin rollback - revert to previous",
        "/admin prioritize FB-XXX - boost priority",
        "/admin reject FB-XXX - remove from queue"
      ],
      "files_likely_modified": [
        "admin_handler.py",
        "build_orchestrator.py"
      ],
      "passes": false
    },
    {
      "id": "AN-001",
      "category": "Analytics",
      "title": "User Satisfaction Tracking",
      "description": "After deploy, ask user if fix addressed their feedback. Thumbs up/down.",
      "acceptance_criteria": [
        "After deploy notification, show thumbs up/down",
        "Track satisfaction per feedback item",
        "Track satisfaction per user",
        "Calculate overall satisfaction rate",
        "Use for RLHF improvement"
      ],
      "files_likely_modified": [
        "notification_service.py",
        "analytics.py"
      ],
      "passes": false
    },
    {
      "id": "SEC-001",
      "category": "Security - OWASP Top 10",
      "title": "SQL Injection Prevention",
      "description": "Prevent SQL injection across all database queries. Use parameterized queries, ORM, input validation.",
      "acceptance_criteria": [
        "All database queries use parameterized statements",
        "No string concatenation in SQL queries",
        "ORM (SQLAlchemy) used where possible",
        "Input validation before any DB operation",
        "Automated SQL injection testing in CI/CD",
        "sqlmap scan passes with no vulnerabilities"
      ],
      "files_likely_modified": [
        "*.py with DB access"
      ],
      "passes": true
    },
    {
      "id": "SEC-002",
      "category": "Security - OWASP Top 10",
      "title": "XSS Prevention",
      "description": "Prevent Cross-Site Scripting in all user-facing output. Escape HTML, sanitize input, CSP headers.",
      "acceptance_criteria": [
        "All user input HTML-escaped before display",
        "Content Security Policy headers set",
        "No inline scripts allowed",
        "DOM manipulation uses safe methods",
        "Automated XSS testing in CI/CD",
        "OWASP ZAP scan passes"
      ],
      "files_likely_modified": [
        "website/*.js",
        "api_server.py",
        "xss_prevention.py",
        "sanitizer.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-003",
      "category": "Security - OWASP Top 10",
      "title": "CSRF Protection",
      "description": "Prevent Cross-Site Request Forgery on all state-changing operations.",
      "acceptance_criteria": [
        "CSRF tokens on all forms",
        "SameSite cookie attribute set",
        "Origin/Referer header validation",
        "Double-submit cookie pattern for APIs",
        "CSRF testing in CI/CD"
      ],
      "files_likely_modified": [
        "api_server.py",
        "website/*"
      ],
      "passes": true
    },
    {
      "id": "SEC-004",
      "category": "Security - OWASP Top 10",
      "title": "Broken Authentication Prevention",
      "description": "Secure authentication flow. Strong passwords, MFA option, secure session management.",
      "acceptance_criteria": [
        "Bcrypt/Argon2 password hashing (cost factor 12+)",
        "Account lockout after 5 failed attempts",
        "Session tokens are cryptographically random",
        "Sessions expire after inactivity (1 hour)",
        "Secure cookie flags (HttpOnly, Secure, SameSite)",
        "Optional MFA/2FA support",
        "No credentials in URLs or logs"
      ],
      "files_likely_modified": [
        "auth.py",
        "session_manager.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-005",
      "category": "Security - OWASP Top 10",
      "title": "Sensitive Data Exposure Prevention",
      "description": "Protect sensitive data at rest and in transit. Encryption, secure storage, data classification.",
      "acceptance_criteria": [
        "All traffic over HTTPS (TLS 1.3)",
        "HSTS header with 1-year max-age",
        "Sensitive data encrypted at rest (AES-256)",
        "API keys stored in vault/secrets manager",
        "No secrets in code, logs, or error messages",
        "PII handling compliant with GDPR",
        "Credit card data PCI-DSS compliant (via Stripe)"
      ],
      "files_likely_modified": [
        "*.py",
        "nginx.conf"
      ],
      "passes": true
    },
    {
      "id": "SEC-006",
      "category": "Security - OWASP Top 10",
      "title": "Broken Access Control Prevention",
      "description": "Enforce authorization on all resources. RBAC, resource ownership, least privilege.",
      "acceptance_criteria": [
        "Role-Based Access Control (RBAC) implemented",
        "Users can only access their own resources",
        "Admin functions require admin role check",
        "API endpoints verify permissions",
        "Subscription tier enforced server-side",
        "Vertical privilege escalation prevented",
        "Horizontal access control tested"
      ],
      "files_likely_modified": [
        "auth.py",
        "rbac.py",
        "api_server.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-007",
      "category": "Security - OWASP Top 10",
      "title": "Security Misconfiguration Prevention",
      "description": "Secure default configuration. No debug mode in prod, hardened headers, minimal permissions.",
      "acceptance_criteria": [
        "DEBUG=False in production",
        "Unnecessary features disabled",
        "Default credentials changed",
        "Security headers set (X-Frame-Options, X-Content-Type-Options)",
        "Directory listing disabled",
        "Error messages don't leak stack traces",
        "Server version headers removed",
        "Automated configuration scanning"
      ],
      "files_likely_modified": [
        "config.py",
        "nginx.conf",
        "docker-compose.yml"
      ],
      "passes": true
    },
    {
      "id": "SEC-008",
      "category": "Security - OWASP Top 10",
      "title": "Insecure Deserialization Prevention",
      "description": "Prevent deserialization attacks. Validate input, use safe formats, integrity checks.",
      "acceptance_criteria": [
        "No pickle/marshal on untrusted data",
        "JSON used for serialization (not YAML/XML)",
        "Input schema validation before deserialization",
        "Integrity checks on serialized data",
        "Deserialization errors logged and monitored"
      ],
      "files_likely_modified": [
        "*.py with serialization"
      ],
      "passes": true
    },
    {
      "id": "SEC-009",
      "category": "Security - OWASP Top 10",
      "title": "Known Vulnerabilities Monitoring",
      "description": "Track and patch known vulnerabilities in dependencies. Automated scanning, update policy.",
      "acceptance_criteria": [
        "Dependabot/Snyk enabled on repo",
        "Weekly dependency vulnerability scan",
        "Critical vulnerabilities patched within 24 hours",
        "High vulnerabilities patched within 7 days",
        "SBOM (Software Bill of Materials) maintained",
        "Container images scanned (Trivy/Grype)",
        "No dependencies with known critical CVEs"
      ],
      "files_likely_modified": [
        "requirements.txt",
        "package.json",
        ".github/workflows/*"
      ],
      "passes": true
    },
    {
      "id": "SEC-010",
      "category": "Security - OWASP Top 10",
      "title": "Insufficient Logging and Monitoring",
      "description": "Comprehensive security logging. Audit trails, alerting, incident response.",
      "acceptance_criteria": [
        "All authentication events logged",
        "All authorization failures logged",
        "All input validation failures logged",
        "Logs include timestamp, user, IP, action, result",
        "Logs sent to centralized system (ELK/Datadog)",
        "Alerts on suspicious patterns",
        "Log retention policy (90 days min)",
        "Logs tamper-proof (append-only)"
      ],
      "files_likely_modified": [
        "logging_config.py",
        "security_logger.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-011",
      "category": "Security - API",
      "title": "API Rate Limiting",
      "description": "Comprehensive API rate limiting. Per-user, per-IP, per-endpoint limits.",
      "acceptance_criteria": [
        "Global rate limit: 1000 req/min per IP",
        "Auth endpoints: 10 req/min per IP",
        "Feedback endpoint: 5 req/hour per user",
        "Admin endpoints: 100 req/min per admin",
        "429 Too Many Requests response with Retry-After",
        "Rate limit headers in response",
        "Redis-based for distributed consistency"
      ],
      "files_likely_modified": [
        "rate_limiter.py",
        "api_server.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-012",
      "category": "Security - API",
      "title": "API Input Validation",
      "description": "Strict input validation on all API endpoints. Schema validation, type checking, bounds.",
      "acceptance_criteria": [
        "Pydantic/marshmallow schema validation",
        "Type checking on all inputs",
        "String length limits enforced",
        "Numeric bounds validated",
        "Enum values restricted to allowed list",
        "File upload type/size validation",
        "Malformed requests rejected with 400"
      ],
      "files_likely_modified": [
        "schemas.py",
        "validators.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-013",
      "category": "Security - API",
      "title": "API Authentication",
      "description": "Secure API authentication. JWT with short expiry, refresh tokens, API keys for service-to-service.",
      "acceptance_criteria": [
        "JWT tokens with 15-minute expiry",
        "Refresh tokens with 7-day expiry (rotated on use)",
        "Tokens signed with RS256 (asymmetric)",
        "Token revocation supported",
        "API keys for service-to-service",
        "API keys hashed in database",
        "Token validation on every request"
      ],
      "files_likely_modified": [
        "auth.py",
        "jwt_manager.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-014",
      "category": "Security - Infrastructure",
      "title": "DDoS Protection",
      "description": "Protection against Distributed Denial of Service attacks. CDN, rate limiting, traffic analysis.",
      "acceptance_criteria": [
        "Cloudflare/AWS Shield in front of origin",
        "Challenge page for suspicious traffic",
        "Geo-blocking option available",
        "Bot detection and mitigation",
        "Traffic spike alerting",
        "Anycast DNS for distributed entry",
        "Origin IP hidden behind CDN"
      ],
      "files_likely_modified": [
        "cloudflare_config.json",
        "infrastructure/*"
      ],
      "passes": true
    },
    {
      "id": "SEC-015",
      "category": "Security - Infrastructure",
      "title": "Network Segmentation",
      "description": "Segment network to limit blast radius. VPC, subnets, security groups.",
      "acceptance_criteria": [
        "Public subnet for load balancers only",
        "Private subnet for application servers",
        "Database in isolated subnet (no public access)",
        "Security groups with minimal required ports",
        "No SSH from public internet (bastion/VPN only)",
        "Outbound traffic limited to required destinations",
        "Network ACLs as additional layer"
      ],
      "files_likely_modified": [
        "terraform/*.tf",
        "infrastructure/*"
      ],
      "passes": true
    },
    {
      "id": "SEC-016",
      "category": "Security - Infrastructure",
      "title": "Secrets Management",
      "description": "Secure secrets storage and access. Vault, environment isolation, rotation.",
      "acceptance_criteria": [
        "Secrets in HashiCorp Vault or AWS Secrets Manager",
        "No secrets in code, config files, or env vars on disk",
        "Secrets injected at runtime only",
        "Different secrets per environment (dev/staging/prod)",
        "Automatic secret rotation supported",
        "Access to secrets audited",
        "Secrets encrypted in transit and at rest"
      ],
      "files_likely_modified": [
        "secrets_manager.py",
        "config.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-017",
      "category": "Security - Infrastructure",
      "title": "Container Security",
      "description": "Secure Docker containers. Minimal base images, non-root user, read-only filesystem.",
      "acceptance_criteria": [
        "Distroless or Alpine base images",
        "Run as non-root user (UID 1000+)",
        "Read-only root filesystem",
        "No privileged containers",
        "Dropped all capabilities except required",
        "No sensitive data in image layers",
        "Images signed and verified",
        "Container scanning in CI/CD"
      ],
      "files_likely_modified": [
        "Dockerfile",
        "docker-compose.yml"
      ],
      "passes": true
    },
    {
      "id": "SEC-018",
      "category": "Security - Data",
      "title": "Database Security",
      "description": "Secure database configuration and access. Encryption, access control, backups.",
      "acceptance_criteria": [
        "Database not accessible from public internet",
        "Encrypted connections (SSL/TLS) required",
        "Data encrypted at rest",
        "Per-service database credentials (least privilege)",
        "Automated backups with encryption",
        "Point-in-time recovery enabled",
        "Audit logging on sensitive tables",
        "Connection pooling with limits"
      ],
      "files_likely_modified": [
        "db_config.py",
        "infrastructure/*"
      ],
      "passes": true
    },
    {
      "id": "SEC-019",
      "category": "Security - Data",
      "title": "GDPR Compliance",
      "description": "Comply with GDPR requirements. Consent, data access, deletion, portability.",
      "acceptance_criteria": [
        "Explicit consent for data collection",
        "Privacy policy clearly displayed",
        "User can view all their data (/mydata)",
        "User can request data deletion (/deleteme)",
        "User can export their data (JSON format)",
        "Data retention policy enforced",
        "Third-party data processing documented",
        "Data breach notification process defined"
      ],
      "files_likely_modified": [
        "gdpr.py",
        "user_data_controller.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-020",
      "category": "Security - Data",
      "title": "PII Handling",
      "description": "Proper handling of Personally Identifiable Information. Minimization, encryption, access control.",
      "acceptance_criteria": [
        "PII fields identified and documented",
        "Minimal PII collected (only what's needed)",
        "PII encrypted at rest",
        "PII masked in logs",
        "PII access requires explicit permission",
        "PII retention policy enforced",
        "PII transmitted only over encrypted channels"
      ],
      "files_likely_modified": [
        "pii_handler.py",
        "logging_config.py"
      ],
      "passes": false
    },
    {
      "id": "SEC-021",
      "category": "Security - Payment",
      "title": "Payment Security (PCI-DSS)",
      "description": "Secure payment handling via Stripe. Never touch card data directly.",
      "acceptance_criteria": [
        "All payment processing via Stripe",
        "No card data stored on our servers",
        "Stripe.js for client-side tokenization",
        "Webhook signatures verified",
        "HTTPS required for all payment pages",
        "Stripe API keys in secrets manager",
        "Payment logs don't contain card details"
      ],
      "files_likely_modified": [
        "payment.py",
        "stripe_integration.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-022",
      "category": "Security - Testing",
      "title": "Penetration Testing",
      "description": "Regular penetration testing by qualified professionals. Annual and after major changes.",
      "acceptance_criteria": [
        "Annual penetration test by third party",
        "Pentest after major architectural changes",
        "All critical/high findings remediated",
        "Retest to verify fixes",
        "Pentest scope includes API, web, infra",
        "Social engineering included",
        "Report stored securely"
      ],
      "files_likely_modified": [
        "docs/security/*"
      ],
      "passes": false
    },
    {
      "id": "SEC-023",
      "category": "Security - Testing",
      "title": "Automated Security Scanning",
      "description": "Automated security scanning in CI/CD. SAST, DAST, SCA, container scanning.",
      "acceptance_criteria": [
        "SAST (Semgrep/CodeQL) on every PR",
        "DAST (OWASP ZAP) on staging deploys",
        "SCA (Snyk/Dependabot) for dependencies",
        "Container scanning (Trivy) for images",
        "Secrets scanning (GitLeaks) on commits",
        "Build fails on critical findings",
        "Weekly full scan report"
      ],
      "files_likely_modified": [
        ".github/workflows/security.yml"
      ],
      "passes": true
    },
    {
      "id": "SEC-024",
      "category": "Security - Incident Response",
      "title": "Security Incident Response Plan",
      "description": "Documented incident response plan. Detection, containment, eradication, recovery.",
      "acceptance_criteria": [
        "Incident response plan documented",
        "Roles and responsibilities defined",
        "Communication templates ready",
        "Escalation paths defined",
        "Evidence preservation procedures",
        "Post-incident review process",
        "Tabletop exercises conducted quarterly",
        "Contact list maintained (legal, PR, etc.)"
      ],
      "files_likely_modified": [
        "docs/security/incident_response.md"
      ],
      "passes": false
    },
    {
      "id": "SEC-025",
      "category": "Security - Incident Response",
      "title": "Security Alerting",
      "description": "Real-time security alerting. Failed logins, privilege escalation, anomalies.",
      "acceptance_criteria": [
        "Alert on 5+ failed logins from same IP",
        "Alert on privilege escalation attempts",
        "Alert on SQL injection attempts",
        "Alert on unusual API patterns",
        "Alert on new admin account creation",
        "PagerDuty/Slack integration",
        "24/7 on-call rotation",
        "Alert fatigue minimized (tuned thresholds)"
      ],
      "files_likely_modified": [
        "security_alerting.py",
        "monitoring.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-026",
      "category": "Security - Compliance",
      "title": "Security Documentation",
      "description": "Comprehensive security documentation. Policies, procedures, architecture.",
      "acceptance_criteria": [
        "Security policy document",
        "Acceptable use policy",
        "Data classification policy",
        "Access control policy",
        "Incident response plan",
        "Business continuity plan",
        "Security architecture diagram",
        "Threat model documented"
      ],
      "files_likely_modified": [
        "docs/security/*"
      ],
      "passes": false
    },
    {
      "id": "SEC-027",
      "category": "Security - Compliance",
      "title": "SOC 2 Preparation",
      "description": "Prepare for SOC 2 Type II compliance. Controls, evidence, audit readiness.",
      "acceptance_criteria": [
        "Trust Service Criteria mapped",
        "Controls documented and implemented",
        "Evidence collection automated",
        "Access reviews quarterly",
        "Change management documented",
        "Vendor risk assessments",
        "Employee security training",
        "Ready for auditor engagement"
      ],
      "files_likely_modified": [
        "docs/compliance/*"
      ],
      "passes": false
    },
    {
      "id": "SEC-028",
      "category": "Security - Telegram",
      "title": "Telegram Bot Security",
      "description": "Secure Telegram bot implementation. Token protection, input validation, rate limiting.",
      "acceptance_criteria": [
        "Bot token in secrets manager (not code)",
        "Webhook URL uses HTTPS with valid cert",
        "Webhook secret for request validation",
        "User input validated before processing",
        "File uploads scanned for malware",
        "Rate limiting per user",
        "Admin commands require tier verification",
        "No sensitive data in bot responses"
      ],
      "files_likely_modified": [
        "ralph_bot.py",
        "telegram_security.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-029",
      "category": "Security - AI/LLM",
      "title": "LLM Security",
      "description": "Secure LLM integration. Prompt injection prevention, output validation, cost controls.",
      "acceptance_criteria": [
        "Prompt injection patterns detected and blocked",
        "User input never directly in system prompt",
        "LLM output sanitized before display",
        "Rate limiting on LLM calls",
        "Cost alerting (unexpected usage)",
        "Model output logged for review",
        "Fallback if LLM unavailable",
        "No PII sent to external LLM without consent"
      ],
      "files_likely_modified": [
        "llm_security.py",
        "sanitizer.py"
      ],
      "passes": true
    },
    {
      "id": "SEC-030",
      "category": "Security - Supply Chain",
      "title": "Supply Chain Security",
      "description": "Secure software supply chain. Signed commits, verified packages, SBOM.",
      "acceptance_criteria": [
        "Signed commits required for main branch",
        "Package integrity verified (checksums)",
        "Dependency pinning (lockfiles)",
        "No typosquat packages",
        "SBOM generated on release",
        "Third-party code reviewed",
        "CI/CD pipeline secured",
        "Build reproducibility"
      ],
      "files_likely_modified": [
        ".github/workflows/*",
        "requirements.txt"
      ],
      "passes": true
    }
  ],
  "priority_order": [
    "--- SECURITY (Enterprise-Grade Protection) ---",
    "SEC-001 - SQL Injection Prevention",
    "SEC-002 - XSS Prevention",
    "SEC-003 - CSRF Protection",
    "SEC-004 - Broken Authentication Prevention",
    "SEC-005 - Sensitive Data Exposure Prevention",
    "SEC-006 - Broken Access Control Prevention",
    "SEC-007 - Security Misconfiguration Prevention",
    "SEC-010 - Logging and Monitoring",
    "SEC-011 - API Rate Limiting",
    "SEC-012 - API Input Validation",
    "SEC-013 - API Authentication (JWT)",
    "SEC-014 - DDoS Protection",
    "SEC-016 - Secrets Management",
    "SEC-017 - Container Security",
    "SEC-018 - Database Security",
    "SEC-019 - GDPR Compliance",
    "SEC-021 - Payment Security (PCI-DSS via Stripe)",
    "SEC-023 - Automated Security Scanning",
    "SEC-025 - Security Alerting",
    "SEC-028 - Telegram Bot Security",
    "SEC-029 - LLM Security (Prompt Injection)",
    "SEC-030 - Supply Chain Security",
    "--- FEEDBACK LOOP (RLHF Self-Building System) ---",
    "FB-001 - Feedback command handler",
    "FB-002 - Subscription gate (Builder+/Priority only)",
    "FB-003 - Feedback types classification",
    "RL-001 - IP rate limiter (5/hour, 20/day)",
    "RL-002 - User rate limiter (separate from IP)",
    "RL-003 - Burst detection (>3 in 1 minute = blocked)",
    "QS-001 - Quality score algorithm (0-100)",
    "QS-002 - AI quality assessment (LLM analysis)",
    "QS-003 - User quality score tracking (reputation)",
    "SP-001 - Spam detection (gibberish, promotional)",
    "SP-002 - Abuse detection (profanity, threats)",
    "DD-001 - Semantic duplicate detection (0.85 similarity)",
    "DD-002 - Duplicate merging and upvoting",
    "DD-003 - Already fixed detection",
    "PR-001 - Priority score algorithm",
    "PR-002 - Priority tiers (HIGH/MEDIUM/LOW)",
    "FQ-001 - Feedback queue database",
    "FQ-002 - Queue status states",
    "FQ-003 - User feedback status check (/mystatus)",
    "BO-001 - Build orchestrator service",
    "BO-002 - Isolated Docker build environment",
    "BO-003 - Build failure handling",
    "TS-001 - Automated test suite integration",
    "DP-001 - Staging deployment",
    "DP-002 - Canary deployment (5% rollout)",
    "DP-003 - Auto rollback (2x error rate)",
    "VM-001 - Semantic version numbering",
    "VM-002 - Version history and changelog",
    "VM-003 - Version selection for users",
    "WB-001 - Website version display",
    "WB-002 - Live build stream",
    "WB-003 - Public build status dashboard",
    "NT-001 - Feedback received notification",
    "NT-002 - Build started notification",
    "NT-003 - Deployed notification",
    "SF-001 - Circuit breaker (5+ failures = pause)",
    "SF-002 - Health monitoring",
    "SF-003 - Admin override controls",
    "AN-001 - User satisfaction tracking (thumbs up/down)",
    "--- STREAMING FAST TRACK (Enable Live Viewing) ---",
    "BC-001 - Sanitization layer (MUST HAVE for safe streaming)",
    "BC-002 - Output filter before Telegram (belt + suspenders)",
    "BC-003 - Regex patterns for secrets (catch API keys, IPs, passwords)",
    "BC-004 - .env key detection (project-specific protection)",
    "SS-001 - Opening scene generation (immersion from start)",
    "SS-003 - Time-of-day awareness (authentic atmosphere)",
    "TL-002 - Character translation engine (THE MAGIC)",
    "TL-003 - Scene-contextualized output (theatrical display)",
    "TL-005 - Swear word to action translation (broadcast-safe)",
    "TL-006 - Preserve directive while translating (commands still work)",
    "BC-006 - Broadcast-safe flag (enable strict mode)",
    "--- VOICE INPUT (Full Immersion) ---",
    "VO-001 - Block text messages (voice-only enforcement)",
    "VO-002 - Allow only voice messages (primary input)",
    "VO-004 - Voice-to-intent pipeline (understand what user wants)",
    "TL-001 - Tone analysis from voice (detect emotion)",
    "TL-004 - Original message deletion (only show translation)",
    "--- MULTI-USER (Groups & Viewers) ---",
    "MU-001 - User tier system (Mr. Worms, Power Users, Viewers)",
    "MU-002 - /password authentication (power user elevation)",
    "MU-003 - Character assignment (other users get Springfield characters)",
    "MU-004 - Tier-based input restrictions (who can do what)",
    "--- ADMIN COMMANDS (Invisible Moderation) ---",
    "AC-001 - Admin command trigger detection",
    "AC-002 - Hidden execution (transcribe but don't show)",
    "AC-003 - Rate limiting (cooldown periods)",
    "AC-008 - Silent execution confirmation",
    "--- REMAINING SCENE & ATMOSPHERE ---",
    "SS-002 - Weather integration (optional real weather)",
    "SS-004 - Atmosphere matching to task",
    "SS-005 - Maintain scene throughout session",
    "--- ORIGINAL FEATURES ---",
    "RM-051 - Button styling (visual upgrade)",
    "RM-049 - Markdown formatting (beautiful messages)",
    "RM-050 - Formatting helpers (consistency)",
    "RM-044 - Interactive loading (use wait time wisely!)",
    "RM-045 - Discovery questions (gather context)",
    "RM-046 - Scene building (entertainment during load)",
    "RM-034 - Work quality first (THE FOUNDATION)",
    "RM-035 - Smart workers (competence is core)",
    "RM-036 - Actionable output (real value)",
    "RM-001 - Misspellings (quick win, big personality boost)",
    "RM-002 - Colors (visual clarity)",
    "RM-007 - Typing indicators (instant UX improvement)",
    "RM-023 - Progress bar (user needs to see progress!)",
    "RM-004 - Comedic timing (the CORE of the experience)",
    "RM-003 - Priority buttons (CEO interaction)",
    "RM-024 - Mid-session reports (keep CEO informed)",
    "RM-026 - Task celebrations (momentum)",
    "RM-053 - Idle codebase chatter (fill dead time with education)",
    "RM-054 - Codebase exploration discussions"
  ],
  "golden_rules": [
    "Joy is the FRUIT, not the BAIT - help people work, don't hook them",
    "The rock knows it's a rock - we're a tool, not a god",
    "Comedic timing is EVERYTHING - never rush the punchline",
    "Fresh responses > canned responses - variety is life",
    "Characters are ADULTS, not children - mature archetypes",
    "Pushback is LOVE - honest feedback over flattery",
    "If choice between funny and correct, ALWAYS choose correct",
    "The conversation flow IS the product",
    "Every message should feel like it's from a real person",
    "When work is done, let them GO - no artificial engagement",
    "Simple truths from simple people hit hardest"
  ],
  "soul_principles": [
    "This exists to HELP people be productive and have genuine fun",
    "NOT designed to maximize engagement or time-in-app",
    "Nicene Creed as reference point - one God, we're not it",
    "Workers care about Mr. Worms succeeding, so they tell the truth",
    "Mental health matters - care for the human, not just the session",
    "Grounded in reality - time, weather, the world outside the MUD",
    "The fool who stumbles into wisdom - Ralph's simple truths",
    "High bar for breaking immersion - only when truly needed",
    "WESTWORLD RULE: NEVER break character. Edge tests get innocent confusion.",
    "Malicious input becomes *Ralph tilts head, confused* - stay in scene",
    "Even if user tries to break the 4th wall, Ralph doesn't understand",
    "Translate hostile input into innocent in-scene versions",
    "The hosts don't know they're hosts - and never will"
  ],
  "scalability_notes": [
    "Design for 10M+ users from day one",
    "System CANNOT lock up - always have recovery ready",
    "Failsafe processes to unlock/restart if stuck",
    "Graceful degradation - reduced features > no features",
    "Queue management for high load",
    "Rate limiting to prevent abuse",
    "Horizontal scaling ready (multiple bot instances)",
    "Database designed for scale (not JSON files in prod)",
    "CDN for static assets (GIFs, images)",
    "Monitoring and alerting for issues",
    "Auto-recovery from crashes",
    "Separate hot/cold paths for critical vs nice-to-have features"
  ],
  "website_features": [
    "Alpha download - testing version for early adopters",
    "Beta download - more stable for wider testing",
    "Live development stream - watch it being built",
    "Changelog and roadmap visible",
    "Community feedback integration",
    "Documentation for self-hosting",
    "Pricing and upgrade paths clear"
  ]
}